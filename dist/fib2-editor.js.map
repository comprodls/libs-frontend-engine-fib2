{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 76bbf490f27be777ebe3","webpack:///./node_modules/sightglass/index.js","webpack:///./node_modules/rivets/dist/rivets.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./src/js/fib-editor/fib2editor-constants.js","webpack:///./src/js/fib-editor/fib2editor.js","webpack:///./src/js/fib-editor/fib2editor-transform.js","webpack:///./src/js/fib-editor/fib2editor-modelview.js","webpack:///./src/scss/fib2-editor.scss?5678","webpack:///./src/scss/fib2-editor.scss","webpack:///./src/html/fib2Editor.html","webpack:///./src/js/fib-editor/fib2editor-utils.js"],"names":["interactionReferenceString","constantInputClass","DOM_SEL_INPUT_BOX","feedbackPresets","key","value","showDropdown","order","load","Symbol","transform","renderView","setUtils","fib2Editor","elRoot","params","adaptor","htmlLayout","jsonContentObj","callback","theme","jsonContent","$","extend","content","undefined","fib2Transformer","Fib2Transformer","fib2EditedJSONContent","interactionIds","utils","Fib2EditorUtils","fib2ModelAndView","Fib2ModelAndView","htmltemplate","template","html","bindData","getConfig","getStatus","saveItemInEditor","buildModelandViewContent","parseAndUpdateJSONForRivets","parseQuestionTextJSONForRivets","parseInstructionTextJSONForRivets","parseGlobalFeedbackJSONForRivets","icon","correct","incorrect","partiallyIncorrect","partiallyCorrect","empty","generic","editedJsonContent","FIBSR","isInstructionEmpty","enableFeedBack","i","length","interaction","interactions","type","questiondata","canvas","data","forEach","element","index","text","questionText","answerText","parsedQuestionArray","interactionsReferences","find","each","id","el","interactionId","trim","push","interactionTag","outerHTML","replace","answer","responses","questionBlank","substring","answerBlank","instructions","map","tag","feedback","global","tempObj","tempArr","Object","keys","processedObj","customAttribs","sort","a","b","require","fib2TemplateRef","initializeRivets","bindEvents","constantTemplateRef","TEMPLATES","FIB2_EDITOR","activityAdaptor","sendItemChangeNotification","rivets","bind","_self","formatters","args","fn","Array","prototype","slice","call","arguments","apply","concat","binders","e","publish","on","userAnswerInputEventListener","addEventListener","unbind","removeEventListener","getValue","innerHTML","routine","className","questionDataEventListener","next","css","prev","setAttribute","updateAnswerTextJSON","handleItemChangedInEditor","addclass","addedClass","removeClass","addClass","editorContent","removeInstruction","addInstruction","addQuestion","removeQuestion","document","ready","config","RESIZE_MODE","RESIZE_HEIGHT","uniqueId","getId","state","pattern","RegExp","paste","clipboardData","window","getData","search","preventDefault","stopPropagation","selection","getSelection","rangeCount","getInteractionId","createElement","dragNode","newNode","textContent","substr","appendChild","getRangeAt","insertNode","currentTarget","classList","JSONContent","finalJSONContent","meta","splitCharacterPosStart","splitCharacterPosEnd","prefix","suffix","question","indexOf","ignorecase","ignorewhitespace","show","hasUnsavedChanges","event","instruction","splice","hide","alert","autoResizeActivityIframe","numOfInteractions","span","parseHTML","itemChangedInEditor","transformJSONtoOriginalForm","every","isAtLeastOneInteractionExist","validateEditedJsonContent","submitEditChanges"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;AAEA,mBAAmB,wBAAwB;AAC3C;;AAEA;AACA;AACA,mBAAmB;AACnB,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG,UAAU,IAA0C;AACvD,IAAI,iCAAO,EAAE,mCAAE;AACf;AACA,KAAK;AAAA,oGAAC;AACN,GAAG;AACH;AACA;AACA,CAAC;;;;;;;ACrND;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,mBAAmB,gCAAgC,GAAG,EAAE;AACtF;AACA,kBAAkB;AAClB,yCAAyC,0BAA0B,2DAA2D,EAAE,kBAAkB,0BAA0B,EAAE,mCAAmC,8BAA8B,oCAAoC,cAAc,EAAE;AACnS,8CAA8C,iCAAiC,OAAO,OAAO,6CAA6C,EAAE,WAAW;;AAEvJ;AACA;AACA;AACA;AACA,iBAAiB;AACjB,oBAAoB;AACpB,oBAAoB;AACpB,kBAAkB;AAClB;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,YAAY;AACpD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,yCAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,WAAW;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,YAAY;AAC5D;AACA;AACA;AACA;AACA,aAAa;AACb,8CAA8C,YAAY;AAC1D;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,YAAY;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,2CAA2C,WAAW;AACtD;AACA,yKAAyK;AACzK;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,WAAW;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,WAAW;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,YAAY;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,WAAW;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,yCAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,YAAY;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,0CAA0C,WAAW;AACrD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,yCAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,yCAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,YAAY;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,0CAA0C,YAAY;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,WAAW;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,WAAW;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,WAAW;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,mBAAO,CAAC,CAAY;AACxD,GAAG,UAAU,IAA0C;AACvD,IAAI,iCAAO,CAAC,sBAAY,CAAC,mCAAE;AAC3B;AACA,KAAK;AAAA,oGAAC;AACN,GAAG;AACH;AACA;;AAEA,CAAC;;;;;;;;AC93CD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;AC3EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,CAAQ;;AAE9B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;AC5WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;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","file":"fib2-editor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 76bbf490f27be777ebe3","(function() {\n  // Public sightglass interface.\n  function sightglass(obj, keypath, callback, options) {\n    return new Observer(obj, keypath, callback, options)\n  }\n\n  // Batteries not included.\n  sightglass.adapters = {}\n\n  // Constructs a new keypath observer and kicks things off.\n  function Observer(obj, keypath, callback, options) {\n    this.options = options || {}\n    this.options.adapters = this.options.adapters || {}\n    this.obj = obj\n    this.keypath = keypath\n    this.callback = callback\n    this.objectPath = []\n    this.update = this.update.bind(this)\n    this.parse()\n\n    if (isObject(this.target = this.realize())) {\n      this.set(true, this.key, this.target, this.callback)\n    }\n  }\n\n  // Tokenizes the provided keypath string into interface + path tokens for the\n  // observer to work with.\n  Observer.tokenize = function(keypath, interfaces, root) {\n    var tokens = []\n    var current = {i: root, path: ''}\n    var index, chr\n\n    for (index = 0; index < keypath.length; index++) {\n      chr = keypath.charAt(index)\n\n      if (!!~interfaces.indexOf(chr)) {\n        tokens.push(current)\n        current = {i: chr, path: ''}\n      } else {\n        current.path += chr\n      }\n    }\n\n    tokens.push(current)\n    return tokens\n  }\n\n  // Parses the keypath using the interfaces defined on the view. Sets variables\n  // for the tokenized keypath as well as the end key.\n  Observer.prototype.parse = function() {\n    var interfaces = this.interfaces()\n    var root, path\n\n    if (!interfaces.length) {\n      error('Must define at least one adapter interface.')\n    }\n\n    if (!!~interfaces.indexOf(this.keypath[0])) {\n      root = this.keypath[0]\n      path = this.keypath.substr(1)\n    } else {\n      if (typeof (root = this.options.root || sightglass.root) === 'undefined') {\n        error('Must define a default root adapter.')\n      }\n\n      path = this.keypath\n    }\n\n    this.tokens = Observer.tokenize(path, interfaces, root)\n    this.key = this.tokens.pop()\n  }\n\n  // Realizes the full keypath, attaching observers for every key and correcting\n  // old observers to any changed objects in the keypath.\n  Observer.prototype.realize = function() {\n    var current = this.obj\n    var unreached = false\n    var prev\n\n    this.tokens.forEach(function(token, index) {\n      if (isObject(current)) {\n        if (typeof this.objectPath[index] !== 'undefined') {\n          if (current !== (prev = this.objectPath[index])) {\n            this.set(false, token, prev, this.update)\n            this.set(true, token, current, this.update)\n            this.objectPath[index] = current\n          }\n        } else {\n          this.set(true, token, current, this.update)\n          this.objectPath[index] = current\n        }\n\n        current = this.get(token, current)\n      } else {\n        if (unreached === false) {\n          unreached = index\n        }\n\n        if (prev = this.objectPath[index]) {\n          this.set(false, token, prev, this.update)\n        }\n      }\n    }, this)\n\n    if (unreached !== false) {\n      this.objectPath.splice(unreached)\n    }\n\n    return current\n  }\n\n  // Updates the keypath. This is called when any intermediary key is changed.\n  Observer.prototype.update = function() {\n    var next, oldValue\n\n    if ((next = this.realize()) !== this.target) {\n      if (isObject(this.target)) {\n        this.set(false, this.key, this.target, this.callback)\n      }\n\n      if (isObject(next)) {\n        this.set(true, this.key, next, this.callback)\n      }\n\n      oldValue = this.value()\n      this.target = next\n\n      // Always call callback if value is a function. If not a function, call callback only if value changed\n      if (this.value() instanceof Function || this.value() !== oldValue) this.callback()\n    }\n  }\n\n  // Reads the current end value of the observed keypath. Returns undefined if\n  // the full keypath is unreachable.\n  Observer.prototype.value = function() {\n    if (isObject(this.target)) {\n      return this.get(this.key, this.target)\n    }\n  }\n\n  // Sets the current end value of the observed keypath. Calling setValue when\n  // the full keypath is unreachable is a no-op.\n  Observer.prototype.setValue = function(value) {\n    if (isObject(this.target)) {\n      this.adapter(this.key).set(this.target, this.key.path, value)\n    }\n  }\n\n  // Gets the provided key on an object.\n  Observer.prototype.get = function(key, obj) {\n    return this.adapter(key).get(obj, key.path)\n  }\n\n  // Observes or unobserves a callback on the object using the provided key.\n  Observer.prototype.set = function(active, key, obj, callback) {\n    var action = active ? 'observe' : 'unobserve'\n    this.adapter(key)[action](obj, key.path, callback)\n  }\n\n  // Returns an array of all unique adapter interfaces available.\n  Observer.prototype.interfaces = function() {\n    var interfaces = Object.keys(this.options.adapters)\n\n    Object.keys(sightglass.adapters).forEach(function(i) {\n      if (!~interfaces.indexOf(i)) {\n        interfaces.push(i)\n      }\n    })\n\n    return interfaces\n  }\n\n  // Convenience function to grab the adapter for a specific key.\n  Observer.prototype.adapter = function(key) {\n    return this.options.adapters[key.i] ||\n      sightglass.adapters[key.i]\n  }\n\n  // Unobserves the entire keypath.\n  Observer.prototype.unobserve = function() {\n    var obj\n\n    this.tokens.forEach(function(token, index) {\n      if (obj = this.objectPath[index]) {\n        this.set(false, token, obj, this.update)\n      }\n    }, this)\n\n    if (isObject(this.target)) {\n      this.set(false, this.key, this.target, this.callback)\n    }\n  }\n\n  // Check if a value is an object than can be observed.\n  function isObject(obj) {\n    return typeof obj === 'object' && obj !== null\n  }\n\n  // Error thrower.\n  function error(message) {\n    throw new Error('[sightglass] ' + message)\n  }\n\n  // Export module for Node and the browser.\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = sightglass\n  } else if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return this.sightglass = sightglass\n    })\n  } else {\n    this.sightglass = sightglass\n  }\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/sightglass/index.js\n// module id = 1\n// module chunks = 0 1","// Rivets.js\n// version: 0.9.6\n// author: Michael Richards\n// license: MIT\n(function() {\n  var Rivets, bindMethod, jQuery, unbindMethod, _ref,\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    __slice = [].slice,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  Rivets = {\n    options: ['prefix', 'templateDelimiters', 'rootInterface', 'preloadData', 'handler', 'executeFunctions'],\n    extensions: ['binders', 'formatters', 'components', 'adapters'],\n    \"public\": {\n      binders: {},\n      components: {},\n      formatters: {},\n      adapters: {},\n      prefix: 'rv',\n      templateDelimiters: ['{', '}'],\n      rootInterface: '.',\n      preloadData: true,\n      executeFunctions: false,\n      iterationAlias: function(modelName) {\n        return '%' + modelName + '%';\n      },\n      handler: function(context, ev, binding) {\n        return this.call(context, ev, binding.view.models);\n      },\n      configure: function(options) {\n        var descriptor, key, option, value;\n        if (options == null) {\n          options = {};\n        }\n        for (option in options) {\n          value = options[option];\n          if (option === 'binders' || option === 'components' || option === 'formatters' || option === 'adapters') {\n            for (key in value) {\n              descriptor = value[key];\n              Rivets[option][key] = descriptor;\n            }\n          } else {\n            Rivets[\"public\"][option] = value;\n          }\n        }\n      },\n      bind: function(el, models, options) {\n        var view;\n        if (models == null) {\n          models = {};\n        }\n        if (options == null) {\n          options = {};\n        }\n        view = new Rivets.View(el, models, options);\n        view.bind();\n        return view;\n      },\n      init: function(component, el, data) {\n        var scope, template, view;\n        if (data == null) {\n          data = {};\n        }\n        if (el == null) {\n          el = document.createElement('div');\n        }\n        component = Rivets[\"public\"].components[component];\n        template = component.template.call(this, el);\n        if (template instanceof HTMLElement) {\n          while (el.firstChild) {\n            el.removeChild(el.firstChild);\n          }\n          el.appendChild(template);\n        } else {\n          el.innerHTML = template;\n        }\n        scope = component.initialize.call(this, el, data);\n        view = new Rivets.View(el, scope);\n        view.bind();\n        return view;\n      }\n    }\n  };\n\n  if (window['jQuery'] || window['$']) {\n    jQuery = window['jQuery'] || window['$'];\n    _ref = 'on' in jQuery.prototype ? ['on', 'off'] : ['bind', 'unbind'], bindMethod = _ref[0], unbindMethod = _ref[1];\n    Rivets.Util = {\n      bindEvent: function(el, event, handler) {\n        return jQuery(el)[bindMethod](event, handler);\n      },\n      unbindEvent: function(el, event, handler) {\n        return jQuery(el)[unbindMethod](event, handler);\n      },\n      getInputValue: function(el) {\n        var $el;\n        $el = jQuery(el);\n        if ($el.attr('type') === 'checkbox') {\n          return $el.is(':checked');\n        } else {\n          return $el.val();\n        }\n      }\n    };\n  } else {\n    Rivets.Util = {\n      bindEvent: (function() {\n        if ('addEventListener' in window) {\n          return function(el, event, handler) {\n            return el.addEventListener(event, handler, false);\n          };\n        }\n        return function(el, event, handler) {\n          return el.attachEvent('on' + event, handler);\n        };\n      })(),\n      unbindEvent: (function() {\n        if ('removeEventListener' in window) {\n          return function(el, event, handler) {\n            return el.removeEventListener(event, handler, false);\n          };\n        }\n        return function(el, event, handler) {\n          return el.detachEvent('on' + event, handler);\n        };\n      })(),\n      getInputValue: function(el) {\n        var o, _i, _len, _results;\n        if (el.type === 'checkbox') {\n          return el.checked;\n        } else if (el.type === 'select-multiple') {\n          _results = [];\n          for (_i = 0, _len = el.length; _i < _len; _i++) {\n            o = el[_i];\n            if (o.selected) {\n              _results.push(o.value);\n            }\n          }\n          return _results;\n        } else {\n          return el.value;\n        }\n      }\n    };\n  }\n\n  Rivets.TypeParser = (function() {\n    function TypeParser() {}\n\n    TypeParser.types = {\n      primitive: 0,\n      keypath: 1\n    };\n\n    TypeParser.parse = function(string) {\n      if (/^'.*'$|^\".*\"$/.test(string)) {\n        return {\n          type: this.types.primitive,\n          value: string.slice(1, -1)\n        };\n      } else if (string === 'true') {\n        return {\n          type: this.types.primitive,\n          value: true\n        };\n      } else if (string === 'false') {\n        return {\n          type: this.types.primitive,\n          value: false\n        };\n      } else if (string === 'null') {\n        return {\n          type: this.types.primitive,\n          value: null\n        };\n      } else if (string === 'undefined') {\n        return {\n          type: this.types.primitive,\n          value: void 0\n        };\n      } else if (string === '') {\n        return {\n          type: this.types.primitive,\n          value: void 0\n        };\n      } else if (isNaN(Number(string)) === false) {\n        return {\n          type: this.types.primitive,\n          value: Number(string)\n        };\n      } else {\n        return {\n          type: this.types.keypath,\n          value: string\n        };\n      }\n    };\n\n    return TypeParser;\n\n  })();\n\n  Rivets.TextTemplateParser = (function() {\n    function TextTemplateParser() {}\n\n    TextTemplateParser.types = {\n      text: 0,\n      binding: 1\n    };\n\n    TextTemplateParser.parse = function(template, delimiters) {\n      var index, lastIndex, lastToken, length, substring, tokens, value;\n      tokens = [];\n      length = template.length;\n      index = 0;\n      lastIndex = 0;\n      while (lastIndex < length) {\n        index = template.indexOf(delimiters[0], lastIndex);\n        if (index < 0) {\n          tokens.push({\n            type: this.types.text,\n            value: template.slice(lastIndex)\n          });\n          break;\n        } else {\n          if (index > 0 && lastIndex < index) {\n            tokens.push({\n              type: this.types.text,\n              value: template.slice(lastIndex, index)\n            });\n          }\n          lastIndex = index + delimiters[0].length;\n          index = template.indexOf(delimiters[1], lastIndex);\n          if (index < 0) {\n            substring = template.slice(lastIndex - delimiters[1].length);\n            lastToken = tokens[tokens.length - 1];\n            if ((lastToken != null ? lastToken.type : void 0) === this.types.text) {\n              lastToken.value += substring;\n            } else {\n              tokens.push({\n                type: this.types.text,\n                value: substring\n              });\n            }\n            break;\n          }\n          value = template.slice(lastIndex, index).trim();\n          tokens.push({\n            type: this.types.binding,\n            value: value\n          });\n          lastIndex = index + delimiters[1].length;\n        }\n      }\n      return tokens;\n    };\n\n    return TextTemplateParser;\n\n  })();\n\n  Rivets.View = (function() {\n    function View(els, models, options) {\n      var k, option, v, _base, _i, _j, _len, _len1, _ref1, _ref2, _ref3, _ref4, _ref5;\n      this.els = els;\n      this.models = models;\n      if (options == null) {\n        options = {};\n      }\n      this.update = __bind(this.update, this);\n      this.publish = __bind(this.publish, this);\n      this.sync = __bind(this.sync, this);\n      this.unbind = __bind(this.unbind, this);\n      this.bind = __bind(this.bind, this);\n      this.select = __bind(this.select, this);\n      this.traverse = __bind(this.traverse, this);\n      this.build = __bind(this.build, this);\n      this.buildBinding = __bind(this.buildBinding, this);\n      this.bindingRegExp = __bind(this.bindingRegExp, this);\n      this.options = __bind(this.options, this);\n      if (!(this.els.jquery || this.els instanceof Array)) {\n        this.els = [this.els];\n      }\n      _ref1 = Rivets.extensions;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        option = _ref1[_i];\n        this[option] = {};\n        if (options[option]) {\n          _ref2 = options[option];\n          for (k in _ref2) {\n            v = _ref2[k];\n            this[option][k] = v;\n          }\n        }\n        _ref3 = Rivets[\"public\"][option];\n        for (k in _ref3) {\n          v = _ref3[k];\n          if ((_base = this[option])[k] == null) {\n            _base[k] = v;\n          }\n        }\n      }\n      _ref4 = Rivets.options;\n      for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {\n        option = _ref4[_j];\n        this[option] = (_ref5 = options[option]) != null ? _ref5 : Rivets[\"public\"][option];\n      }\n      this.build();\n    }\n\n    View.prototype.options = function() {\n      var option, options, _i, _len, _ref1;\n      options = {};\n      _ref1 = Rivets.extensions.concat(Rivets.options);\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        option = _ref1[_i];\n        options[option] = this[option];\n      }\n      return options;\n    };\n\n    View.prototype.bindingRegExp = function() {\n      return new RegExp(\"^\" + this.prefix + \"-\");\n    };\n\n    View.prototype.buildBinding = function(binding, node, type, declaration) {\n      var context, ctx, dependencies, keypath, options, pipe, pipes;\n      options = {};\n      pipes = (function() {\n        var _i, _len, _ref1, _results;\n        _ref1 = declaration.match(/((?:'[^']*')*(?:(?:[^\\|']*(?:'[^']*')+[^\\|']*)+|[^\\|]+))|^$/g);\n        _results = [];\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          pipe = _ref1[_i];\n          _results.push(pipe.trim());\n        }\n        return _results;\n      })();\n      context = (function() {\n        var _i, _len, _ref1, _results;\n        _ref1 = pipes.shift().split('<');\n        _results = [];\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          ctx = _ref1[_i];\n          _results.push(ctx.trim());\n        }\n        return _results;\n      })();\n      keypath = context.shift();\n      options.formatters = pipes;\n      if (dependencies = context.shift()) {\n        options.dependencies = dependencies.split(/\\s+/);\n      }\n      return this.bindings.push(new Rivets[binding](this, node, type, keypath, options));\n    };\n\n    View.prototype.build = function() {\n      var el, parse, _i, _len, _ref1;\n      this.bindings = [];\n      parse = (function(_this) {\n        return function(node) {\n          var block, childNode, delimiters, n, parser, text, token, tokens, _i, _j, _len, _len1, _ref1;\n          if (node.nodeType === 3) {\n            parser = Rivets.TextTemplateParser;\n            if (delimiters = _this.templateDelimiters) {\n              if ((tokens = parser.parse(node.data, delimiters)).length) {\n                if (!(tokens.length === 1 && tokens[0].type === parser.types.text)) {\n                  for (_i = 0, _len = tokens.length; _i < _len; _i++) {\n                    token = tokens[_i];\n                    text = document.createTextNode(token.value);\n                    node.parentNode.insertBefore(text, node);\n                    if (token.type === 1) {\n                      _this.buildBinding('TextBinding', text, null, token.value);\n                    }\n                  }\n                  node.parentNode.removeChild(node);\n                }\n              }\n            }\n          } else if (node.nodeType === 1) {\n            block = _this.traverse(node);\n          }\n          if (!block) {\n            _ref1 = (function() {\n              var _k, _len1, _ref1, _results;\n              _ref1 = node.childNodes;\n              _results = [];\n              for (_k = 0, _len1 = _ref1.length; _k < _len1; _k++) {\n                n = _ref1[_k];\n                _results.push(n);\n              }\n              return _results;\n            })();\n            for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n              childNode = _ref1[_j];\n              parse(childNode);\n            }\n          }\n        };\n      })(this);\n      _ref1 = this.els;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        el = _ref1[_i];\n        parse(el);\n      }\n      this.bindings.sort(function(a, b) {\n        var _ref2, _ref3;\n        return (((_ref2 = b.binder) != null ? _ref2.priority : void 0) || 0) - (((_ref3 = a.binder) != null ? _ref3.priority : void 0) || 0);\n      });\n    };\n\n    View.prototype.traverse = function(node) {\n      var attribute, attributes, binder, bindingRegExp, block, identifier, regexp, type, value, _i, _j, _len, _len1, _ref1, _ref2, _ref3;\n      bindingRegExp = this.bindingRegExp();\n      block = node.nodeName === 'SCRIPT' || node.nodeName === 'STYLE';\n      _ref1 = node.attributes;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        attribute = _ref1[_i];\n        if (bindingRegExp.test(attribute.name)) {\n          type = attribute.name.replace(bindingRegExp, '');\n          if (!(binder = this.binders[type])) {\n            _ref2 = this.binders;\n            for (identifier in _ref2) {\n              value = _ref2[identifier];\n              if (identifier !== '*' && identifier.indexOf('*') !== -1) {\n                regexp = new RegExp(\"^\" + (identifier.replace(/\\*/g, '.+')) + \"$\");\n                if (regexp.test(type)) {\n                  binder = value;\n                }\n              }\n            }\n          }\n          binder || (binder = this.binders['*']);\n          if (binder.block) {\n            block = true;\n            attributes = [attribute];\n          }\n        }\n      }\n      _ref3 = attributes || node.attributes;\n      for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n        attribute = _ref3[_j];\n        if (bindingRegExp.test(attribute.name)) {\n          type = attribute.name.replace(bindingRegExp, '');\n          this.buildBinding('Binding', node, type, attribute.value);\n        }\n      }\n      if (!block) {\n        type = node.nodeName.toLowerCase();\n        if (this.components[type] && !node._bound) {\n          this.bindings.push(new Rivets.ComponentBinding(this, node, type));\n          block = true;\n        }\n      }\n      return block;\n    };\n\n    View.prototype.select = function(fn) {\n      var binding, _i, _len, _ref1, _results;\n      _ref1 = this.bindings;\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        if (fn(binding)) {\n          _results.push(binding);\n        }\n      }\n      return _results;\n    };\n\n    View.prototype.bind = function() {\n      var binding, _i, _len, _ref1;\n      _ref1 = this.bindings;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        binding.bind();\n      }\n    };\n\n    View.prototype.unbind = function() {\n      var binding, _i, _len, _ref1;\n      _ref1 = this.bindings;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        binding.unbind();\n      }\n    };\n\n    View.prototype.sync = function() {\n      var binding, _i, _len, _ref1;\n      _ref1 = this.bindings;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        if (typeof binding.sync === \"function\") {\n          binding.sync();\n        }\n      }\n    };\n\n    View.prototype.publish = function() {\n      var binding, _i, _len, _ref1;\n      _ref1 = this.select(function(b) {\n        var _ref1;\n        return (_ref1 = b.binder) != null ? _ref1.publishes : void 0;\n      });\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        binding.publish();\n      }\n    };\n\n    View.prototype.update = function(models) {\n      var binding, key, model, _i, _len, _ref1;\n      if (models == null) {\n        models = {};\n      }\n      for (key in models) {\n        model = models[key];\n        this.models[key] = model;\n      }\n      _ref1 = this.bindings;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        binding = _ref1[_i];\n        if (typeof binding.update === \"function\") {\n          binding.update(models);\n        }\n      }\n    };\n\n    return View;\n\n  })();\n\n  Rivets.Binding = (function() {\n    function Binding(view, el, type, keypath, options) {\n      this.view = view;\n      this.el = el;\n      this.type = type;\n      this.keypath = keypath;\n      this.options = options != null ? options : {};\n      this.getValue = __bind(this.getValue, this);\n      this.update = __bind(this.update, this);\n      this.unbind = __bind(this.unbind, this);\n      this.bind = __bind(this.bind, this);\n      this.publish = __bind(this.publish, this);\n      this.sync = __bind(this.sync, this);\n      this.set = __bind(this.set, this);\n      this.eventHandler = __bind(this.eventHandler, this);\n      this.formattedValue = __bind(this.formattedValue, this);\n      this.parseFormatterArguments = __bind(this.parseFormatterArguments, this);\n      this.parseTarget = __bind(this.parseTarget, this);\n      this.observe = __bind(this.observe, this);\n      this.setBinder = __bind(this.setBinder, this);\n      this.formatters = this.options.formatters || [];\n      this.dependencies = [];\n      this.formatterObservers = {};\n      this.model = void 0;\n      this.setBinder();\n    }\n\n    Binding.prototype.setBinder = function() {\n      var identifier, regexp, value, _ref1;\n      if (!(this.binder = this.view.binders[this.type])) {\n        _ref1 = this.view.binders;\n        for (identifier in _ref1) {\n          value = _ref1[identifier];\n          if (identifier !== '*' && identifier.indexOf('*') !== -1) {\n            regexp = new RegExp(\"^\" + (identifier.replace(/\\*/g, '.+')) + \"$\");\n            if (regexp.test(this.type)) {\n              this.binder = value;\n              this.args = new RegExp(\"^\" + (identifier.replace(/\\*/g, '(.+)')) + \"$\").exec(this.type);\n              this.args.shift();\n            }\n          }\n        }\n      }\n      this.binder || (this.binder = this.view.binders['*']);\n      if (this.binder instanceof Function) {\n        return this.binder = {\n          routine: this.binder\n        };\n      }\n    };\n\n    Binding.prototype.observe = function(obj, keypath, callback) {\n      return Rivets.sightglass(obj, keypath, callback, {\n        root: this.view.rootInterface,\n        adapters: this.view.adapters\n      });\n    };\n\n    Binding.prototype.parseTarget = function() {\n      var token;\n      token = Rivets.TypeParser.parse(this.keypath);\n      if (token.type === Rivets.TypeParser.types.primitive) {\n        return this.value = token.value;\n      } else {\n        this.observer = this.observe(this.view.models, this.keypath, this.sync);\n        return this.model = this.observer.target;\n      }\n    };\n\n    Binding.prototype.parseFormatterArguments = function(args, formatterIndex) {\n      var ai, arg, observer, processedArgs, _base, _i, _len;\n      args = (function() {\n        var _i, _len, _results;\n        _results = [];\n        for (_i = 0, _len = args.length; _i < _len; _i++) {\n          arg = args[_i];\n          _results.push(Rivets.TypeParser.parse(arg));\n        }\n        return _results;\n      })();\n      processedArgs = [];\n      for (ai = _i = 0, _len = args.length; _i < _len; ai = ++_i) {\n        arg = args[ai];\n        processedArgs.push(arg.type === Rivets.TypeParser.types.primitive ? arg.value : ((_base = this.formatterObservers)[formatterIndex] || (_base[formatterIndex] = {}), !(observer = this.formatterObservers[formatterIndex][ai]) ? (observer = this.observe(this.view.models, arg.value, this.sync), this.formatterObservers[formatterIndex][ai] = observer) : void 0, observer.value()));\n      }\n      return processedArgs;\n    };\n\n    Binding.prototype.formattedValue = function(value) {\n      var args, fi, formatter, id, processedArgs, _i, _len, _ref1, _ref2;\n      _ref1 = this.formatters;\n      for (fi = _i = 0, _len = _ref1.length; _i < _len; fi = ++_i) {\n        formatter = _ref1[fi];\n        args = formatter.match(/[^\\s']+|'([^']|'[^\\s])*'|\"([^\"]|\"[^\\s])*\"/g);\n        id = args.shift();\n        formatter = this.view.formatters[id];\n        processedArgs = this.parseFormatterArguments(args, fi);\n        if ((formatter != null ? formatter.read : void 0) instanceof Function) {\n          value = (_ref2 = formatter.read).call.apply(_ref2, [this.model, value].concat(__slice.call(processedArgs)));\n        } else if (formatter instanceof Function) {\n          value = formatter.call.apply(formatter, [this.model, value].concat(__slice.call(processedArgs)));\n        }\n      }\n      return value;\n    };\n\n    Binding.prototype.eventHandler = function(fn) {\n      var binding, handler;\n      handler = (binding = this).view.handler;\n      return function(ev) {\n        return handler.call(fn, this, ev, binding);\n      };\n    };\n\n    Binding.prototype.set = function(value) {\n      var _ref1;\n      value = value instanceof Function && !this.binder[\"function\"] && Rivets[\"public\"].executeFunctions ? this.formattedValue(value.call(this.model)) : this.formattedValue(value);\n      return (_ref1 = this.binder.routine) != null ? _ref1.call(this, this.el, value) : void 0;\n    };\n\n    Binding.prototype.sync = function() {\n      var dependency, observer;\n      return this.set((function() {\n        var _i, _j, _len, _len1, _ref1, _ref2, _ref3;\n        if (this.observer) {\n          if (this.model !== this.observer.target) {\n            _ref1 = this.dependencies;\n            for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n              observer = _ref1[_i];\n              observer.unobserve();\n            }\n            this.dependencies = [];\n            if (((this.model = this.observer.target) != null) && ((_ref2 = this.options.dependencies) != null ? _ref2.length : void 0)) {\n              _ref3 = this.options.dependencies;\n              for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n                dependency = _ref3[_j];\n                observer = this.observe(this.model, dependency, this.sync);\n                this.dependencies.push(observer);\n              }\n            }\n          }\n          return this.observer.value();\n        } else {\n          return this.value;\n        }\n      }).call(this));\n    };\n\n    Binding.prototype.publish = function() {\n      var args, fi, fiReversed, formatter, id, lastformatterIndex, processedArgs, value, _i, _len, _ref1, _ref2, _ref3;\n      if (this.observer) {\n        value = this.getValue(this.el);\n        lastformatterIndex = this.formatters.length - 1;\n        _ref1 = this.formatters.slice(0).reverse();\n        for (fiReversed = _i = 0, _len = _ref1.length; _i < _len; fiReversed = ++_i) {\n          formatter = _ref1[fiReversed];\n          fi = lastformatterIndex - fiReversed;\n          args = formatter.split(/\\s+/);\n          id = args.shift();\n          processedArgs = this.parseFormatterArguments(args, fi);\n          if ((_ref2 = this.view.formatters[id]) != null ? _ref2.publish : void 0) {\n            value = (_ref3 = this.view.formatters[id]).publish.apply(_ref3, [value].concat(__slice.call(processedArgs)));\n          }\n        }\n        return this.observer.setValue(value);\n      }\n    };\n\n    Binding.prototype.bind = function() {\n      var dependency, observer, _i, _len, _ref1, _ref2, _ref3;\n      this.parseTarget();\n      if ((_ref1 = this.binder.bind) != null) {\n        _ref1.call(this, this.el);\n      }\n      if ((this.model != null) && ((_ref2 = this.options.dependencies) != null ? _ref2.length : void 0)) {\n        _ref3 = this.options.dependencies;\n        for (_i = 0, _len = _ref3.length; _i < _len; _i++) {\n          dependency = _ref3[_i];\n          observer = this.observe(this.model, dependency, this.sync);\n          this.dependencies.push(observer);\n        }\n      }\n      if (this.view.preloadData) {\n        return this.sync();\n      }\n    };\n\n    Binding.prototype.unbind = function() {\n      var ai, args, fi, observer, _i, _len, _ref1, _ref2, _ref3, _ref4;\n      if ((_ref1 = this.binder.unbind) != null) {\n        _ref1.call(this, this.el);\n      }\n      if ((_ref2 = this.observer) != null) {\n        _ref2.unobserve();\n      }\n      _ref3 = this.dependencies;\n      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {\n        observer = _ref3[_i];\n        observer.unobserve();\n      }\n      this.dependencies = [];\n      _ref4 = this.formatterObservers;\n      for (fi in _ref4) {\n        args = _ref4[fi];\n        for (ai in args) {\n          observer = args[ai];\n          observer.unobserve();\n        }\n      }\n      return this.formatterObservers = {};\n    };\n\n    Binding.prototype.update = function(models) {\n      var _ref1, _ref2;\n      if (models == null) {\n        models = {};\n      }\n      this.model = (_ref1 = this.observer) != null ? _ref1.target : void 0;\n      return (_ref2 = this.binder.update) != null ? _ref2.call(this, models) : void 0;\n    };\n\n    Binding.prototype.getValue = function(el) {\n      if (this.binder && (this.binder.getValue != null)) {\n        return this.binder.getValue.call(this, el);\n      } else {\n        return Rivets.Util.getInputValue(el);\n      }\n    };\n\n    return Binding;\n\n  })();\n\n  Rivets.ComponentBinding = (function(_super) {\n    __extends(ComponentBinding, _super);\n\n    function ComponentBinding(view, el, type) {\n      var attribute, bindingRegExp, propertyName, token, _i, _len, _ref1, _ref2;\n      this.view = view;\n      this.el = el;\n      this.type = type;\n      this.unbind = __bind(this.unbind, this);\n      this.bind = __bind(this.bind, this);\n      this.locals = __bind(this.locals, this);\n      this.component = this.view.components[this.type];\n      this[\"static\"] = {};\n      this.observers = {};\n      this.upstreamObservers = {};\n      bindingRegExp = view.bindingRegExp();\n      _ref1 = this.el.attributes || [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        attribute = _ref1[_i];\n        if (!bindingRegExp.test(attribute.name)) {\n          propertyName = this.camelCase(attribute.name);\n          token = Rivets.TypeParser.parse(attribute.value);\n          if (__indexOf.call((_ref2 = this.component[\"static\"]) != null ? _ref2 : [], propertyName) >= 0) {\n            this[\"static\"][propertyName] = attribute.value;\n          } else if (token.type === Rivets.TypeParser.types.primitive) {\n            this[\"static\"][propertyName] = token.value;\n          } else {\n            this.observers[propertyName] = attribute.value;\n          }\n        }\n      }\n    }\n\n    ComponentBinding.prototype.sync = function() {};\n\n    ComponentBinding.prototype.update = function() {};\n\n    ComponentBinding.prototype.publish = function() {};\n\n    ComponentBinding.prototype.locals = function() {\n      var key, observer, result, value, _ref1, _ref2;\n      result = {};\n      _ref1 = this[\"static\"];\n      for (key in _ref1) {\n        value = _ref1[key];\n        result[key] = value;\n      }\n      _ref2 = this.observers;\n      for (key in _ref2) {\n        observer = _ref2[key];\n        result[key] = observer.value();\n      }\n      return result;\n    };\n\n    ComponentBinding.prototype.camelCase = function(string) {\n      return string.replace(/-([a-z])/g, function(grouped) {\n        return grouped[1].toUpperCase();\n      });\n    };\n\n    ComponentBinding.prototype.bind = function() {\n      var k, key, keypath, observer, option, options, scope, v, _base, _i, _j, _len, _len1, _ref1, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7;\n      if (!this.bound) {\n        _ref1 = this.observers;\n        for (key in _ref1) {\n          keypath = _ref1[key];\n          this.observers[key] = this.observe(this.view.models, keypath, ((function(_this) {\n            return function(key) {\n              return function() {\n                return _this.componentView.models[key] = _this.observers[key].value();\n              };\n            };\n          })(this)).call(this, key));\n        }\n        this.bound = true;\n      }\n      if (this.componentView != null) {\n        this.componentView.bind();\n      } else {\n        this.el.innerHTML = this.component.template.call(this);\n        scope = this.component.initialize.call(this, this.el, this.locals());\n        this.el._bound = true;\n        options = {};\n        _ref2 = Rivets.extensions;\n        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {\n          option = _ref2[_i];\n          options[option] = {};\n          if (this.component[option]) {\n            _ref3 = this.component[option];\n            for (k in _ref3) {\n              v = _ref3[k];\n              options[option][k] = v;\n            }\n          }\n          _ref4 = this.view[option];\n          for (k in _ref4) {\n            v = _ref4[k];\n            if ((_base = options[option])[k] == null) {\n              _base[k] = v;\n            }\n          }\n        }\n        _ref5 = Rivets.options;\n        for (_j = 0, _len1 = _ref5.length; _j < _len1; _j++) {\n          option = _ref5[_j];\n          options[option] = (_ref6 = this.component[option]) != null ? _ref6 : this.view[option];\n        }\n        this.componentView = new Rivets.View(Array.prototype.slice.call(this.el.childNodes), scope, options);\n        this.componentView.bind();\n        _ref7 = this.observers;\n        for (key in _ref7) {\n          observer = _ref7[key];\n          this.upstreamObservers[key] = this.observe(this.componentView.models, key, ((function(_this) {\n            return function(key, observer) {\n              return function() {\n                return observer.setValue(_this.componentView.models[key]);\n              };\n            };\n          })(this)).call(this, key, observer));\n        }\n      }\n    };\n\n    ComponentBinding.prototype.unbind = function() {\n      var key, observer, _ref1, _ref2, _ref3;\n      _ref1 = this.upstreamObservers;\n      for (key in _ref1) {\n        observer = _ref1[key];\n        observer.unobserve();\n      }\n      _ref2 = this.observers;\n      for (key in _ref2) {\n        observer = _ref2[key];\n        observer.unobserve();\n      }\n      return (_ref3 = this.componentView) != null ? _ref3.unbind.call(this) : void 0;\n    };\n\n    return ComponentBinding;\n\n  })(Rivets.Binding);\n\n  Rivets.TextBinding = (function(_super) {\n    __extends(TextBinding, _super);\n\n    function TextBinding(view, el, type, keypath, options) {\n      this.view = view;\n      this.el = el;\n      this.type = type;\n      this.keypath = keypath;\n      this.options = options != null ? options : {};\n      this.sync = __bind(this.sync, this);\n      this.formatters = this.options.formatters || [];\n      this.dependencies = [];\n      this.formatterObservers = {};\n    }\n\n    TextBinding.prototype.binder = {\n      routine: function(node, value) {\n        return node.data = value != null ? value : '';\n      }\n    };\n\n    TextBinding.prototype.sync = function() {\n      return TextBinding.__super__.sync.apply(this, arguments);\n    };\n\n    return TextBinding;\n\n  })(Rivets.Binding);\n\n  Rivets[\"public\"].binders.text = function(el, value) {\n    if (el.textContent != null) {\n      return el.textContent = value != null ? value : '';\n    } else {\n      return el.innerText = value != null ? value : '';\n    }\n  };\n\n  Rivets[\"public\"].binders.html = function(el, value) {\n    return el.innerHTML = value != null ? value : '';\n  };\n\n  Rivets[\"public\"].binders.show = function(el, value) {\n    return el.style.display = value ? '' : 'none';\n  };\n\n  Rivets[\"public\"].binders.hide = function(el, value) {\n    return el.style.display = value ? 'none' : '';\n  };\n\n  Rivets[\"public\"].binders.enabled = function(el, value) {\n    return el.disabled = !value;\n  };\n\n  Rivets[\"public\"].binders.disabled = function(el, value) {\n    return el.disabled = !!value;\n  };\n\n  Rivets[\"public\"].binders.checked = {\n    publishes: true,\n    priority: 2000,\n    bind: function(el) {\n      return Rivets.Util.bindEvent(el, 'change', this.publish);\n    },\n    unbind: function(el) {\n      return Rivets.Util.unbindEvent(el, 'change', this.publish);\n    },\n    routine: function(el, value) {\n      var _ref1;\n      if (el.type === 'radio') {\n        return el.checked = ((_ref1 = el.value) != null ? _ref1.toString() : void 0) === (value != null ? value.toString() : void 0);\n      } else {\n        return el.checked = !!value;\n      }\n    }\n  };\n\n  Rivets[\"public\"].binders.unchecked = {\n    publishes: true,\n    priority: 2000,\n    bind: function(el) {\n      return Rivets.Util.bindEvent(el, 'change', this.publish);\n    },\n    unbind: function(el) {\n      return Rivets.Util.unbindEvent(el, 'change', this.publish);\n    },\n    routine: function(el, value) {\n      var _ref1;\n      if (el.type === 'radio') {\n        return el.checked = ((_ref1 = el.value) != null ? _ref1.toString() : void 0) !== (value != null ? value.toString() : void 0);\n      } else {\n        return el.checked = !value;\n      }\n    }\n  };\n\n  Rivets[\"public\"].binders.value = {\n    publishes: true,\n    priority: 3000,\n    bind: function(el) {\n      if (!(el.tagName === 'INPUT' && el.type === 'radio')) {\n        this.event = el.tagName === 'SELECT' ? 'change' : 'input';\n        return Rivets.Util.bindEvent(el, this.event, this.publish);\n      }\n    },\n    unbind: function(el) {\n      if (!(el.tagName === 'INPUT' && el.type === 'radio')) {\n        return Rivets.Util.unbindEvent(el, this.event, this.publish);\n      }\n    },\n    routine: function(el, value) {\n      var o, _i, _len, _ref1, _ref2, _ref3, _results;\n      if (el.tagName === 'INPUT' && el.type === 'radio') {\n        return el.setAttribute('value', value);\n      } else if (window.jQuery != null) {\n        el = jQuery(el);\n        if ((value != null ? value.toString() : void 0) !== ((_ref1 = el.val()) != null ? _ref1.toString() : void 0)) {\n          return el.val(value != null ? value : '');\n        }\n      } else {\n        if (el.type === 'select-multiple') {\n          if (value != null) {\n            _results = [];\n            for (_i = 0, _len = el.length; _i < _len; _i++) {\n              o = el[_i];\n              _results.push(o.selected = (_ref2 = o.value, __indexOf.call(value, _ref2) >= 0));\n            }\n            return _results;\n          }\n        } else if ((value != null ? value.toString() : void 0) !== ((_ref3 = el.value) != null ? _ref3.toString() : void 0)) {\n          return el.value = value != null ? value : '';\n        }\n      }\n    }\n  };\n\n  Rivets[\"public\"].binders[\"if\"] = {\n    block: true,\n    priority: 4000,\n    bind: function(el) {\n      var attr, declaration;\n      if (this.marker == null) {\n        attr = [this.view.prefix, this.type].join('-').replace('--', '-');\n        declaration = el.getAttribute(attr);\n        this.marker = document.createComment(\" rivets: \" + this.type + \" \" + declaration + \" \");\n        this.bound = false;\n        el.removeAttribute(attr);\n        el.parentNode.insertBefore(this.marker, el);\n        return el.parentNode.removeChild(el);\n      }\n    },\n    unbind: function() {\n      if (this.nested) {\n        this.nested.unbind();\n        return this.bound = false;\n      }\n    },\n    routine: function(el, value) {\n      var key, model, models, _ref1;\n      if (!!value === !this.bound) {\n        if (value) {\n          models = {};\n          _ref1 = this.view.models;\n          for (key in _ref1) {\n            model = _ref1[key];\n            models[key] = model;\n          }\n          (this.nested || (this.nested = new Rivets.View(el, models, this.view.options()))).bind();\n          this.marker.parentNode.insertBefore(el, this.marker.nextSibling);\n          return this.bound = true;\n        } else {\n          el.parentNode.removeChild(el);\n          this.nested.unbind();\n          return this.bound = false;\n        }\n      }\n    },\n    update: function(models) {\n      var _ref1;\n      return (_ref1 = this.nested) != null ? _ref1.update(models) : void 0;\n    }\n  };\n\n  Rivets[\"public\"].binders.unless = {\n    block: true,\n    priority: 4000,\n    bind: function(el) {\n      return Rivets[\"public\"].binders[\"if\"].bind.call(this, el);\n    },\n    unbind: function() {\n      return Rivets[\"public\"].binders[\"if\"].unbind.call(this);\n    },\n    routine: function(el, value) {\n      return Rivets[\"public\"].binders[\"if\"].routine.call(this, el, !value);\n    },\n    update: function(models) {\n      return Rivets[\"public\"].binders[\"if\"].update.call(this, models);\n    }\n  };\n\n  Rivets[\"public\"].binders['on-*'] = {\n    \"function\": true,\n    priority: 1000,\n    unbind: function(el) {\n      if (this.handler) {\n        return Rivets.Util.unbindEvent(el, this.args[0], this.handler);\n      }\n    },\n    routine: function(el, value) {\n      if (this.handler) {\n        Rivets.Util.unbindEvent(el, this.args[0], this.handler);\n      }\n      return Rivets.Util.bindEvent(el, this.args[0], this.handler = this.eventHandler(value));\n    }\n  };\n\n  Rivets[\"public\"].binders['each-*'] = {\n    block: true,\n    priority: 4000,\n    bind: function(el) {\n      var attr, view, _i, _len, _ref1;\n      if (this.marker == null) {\n        attr = [this.view.prefix, this.type].join('-').replace('--', '-');\n        this.marker = document.createComment(\" rivets: \" + this.type + \" \");\n        this.iterated = [];\n        el.removeAttribute(attr);\n        el.parentNode.insertBefore(this.marker, el);\n        el.parentNode.removeChild(el);\n      } else {\n        _ref1 = this.iterated;\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          view = _ref1[_i];\n          view.bind();\n        }\n      }\n    },\n    unbind: function(el) {\n      var view, _i, _len, _ref1;\n      if (this.iterated != null) {\n        _ref1 = this.iterated;\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          view = _ref1[_i];\n          view.unbind();\n        }\n      }\n    },\n    routine: function(el, collection) {\n      var binding, data, i, index, key, model, modelName, options, previous, template, view, _i, _j, _k, _len, _len1, _len2, _ref1, _ref2, _ref3;\n      modelName = this.args[0];\n      collection = collection || [];\n      if (this.iterated.length > collection.length) {\n        _ref1 = Array(this.iterated.length - collection.length);\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          i = _ref1[_i];\n          view = this.iterated.pop();\n          view.unbind();\n          this.marker.parentNode.removeChild(view.els[0]);\n        }\n      }\n      for (index = _j = 0, _len1 = collection.length; _j < _len1; index = ++_j) {\n        model = collection[index];\n        data = {\n          index: index\n        };\n        data[Rivets[\"public\"].iterationAlias(modelName)] = index;\n        data[modelName] = model;\n        if (this.iterated[index] == null) {\n          _ref2 = this.view.models;\n          for (key in _ref2) {\n            model = _ref2[key];\n            if (data[key] == null) {\n              data[key] = model;\n            }\n          }\n          previous = this.iterated.length ? this.iterated[this.iterated.length - 1].els[0] : this.marker;\n          options = this.view.options();\n          options.preloadData = true;\n          template = el.cloneNode(true);\n          view = new Rivets.View(template, data, options);\n          view.bind();\n          this.iterated.push(view);\n          this.marker.parentNode.insertBefore(template, previous.nextSibling);\n        } else if (this.iterated[index].models[modelName] !== model) {\n          this.iterated[index].update(data);\n        }\n      }\n      if (el.nodeName === 'OPTION') {\n        _ref3 = this.view.bindings;\n        for (_k = 0, _len2 = _ref3.length; _k < _len2; _k++) {\n          binding = _ref3[_k];\n          if (binding.el === this.marker.parentNode && binding.type === 'value') {\n            binding.sync();\n          }\n        }\n      }\n    },\n    update: function(models) {\n      var data, key, model, view, _i, _len, _ref1;\n      data = {};\n      for (key in models) {\n        model = models[key];\n        if (key !== this.args[0]) {\n          data[key] = model;\n        }\n      }\n      _ref1 = this.iterated;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        view = _ref1[_i];\n        view.update(data);\n      }\n    }\n  };\n\n  Rivets[\"public\"].binders['class-*'] = function(el, value) {\n    var elClass;\n    elClass = \" \" + el.className + \" \";\n    if (!value === (elClass.indexOf(\" \" + this.args[0] + \" \") !== -1)) {\n      return el.className = value ? \"\" + el.className + \" \" + this.args[0] : elClass.replace(\" \" + this.args[0] + \" \", ' ').trim();\n    }\n  };\n\n  Rivets[\"public\"].binders['*'] = function(el, value) {\n    if (value != null) {\n      return el.setAttribute(this.type, value);\n    } else {\n      return el.removeAttribute(this.type);\n    }\n  };\n\n  Rivets[\"public\"].formatters['call'] = function() {\n    var args, value;\n    value = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    return value.call.apply(value, [this].concat(__slice.call(args)));\n  };\n\n  Rivets[\"public\"].adapters['.'] = {\n    id: '_rv',\n    counter: 0,\n    weakmap: {},\n    weakReference: function(obj) {\n      var id, _base, _name;\n      if (!obj.hasOwnProperty(this.id)) {\n        id = this.counter++;\n        Object.defineProperty(obj, this.id, {\n          value: id\n        });\n      }\n      return (_base = this.weakmap)[_name = obj[this.id]] || (_base[_name] = {\n        callbacks: {}\n      });\n    },\n    cleanupWeakReference: function(ref, id) {\n      if (!Object.keys(ref.callbacks).length) {\n        if (!(ref.pointers && Object.keys(ref.pointers).length)) {\n          return delete this.weakmap[id];\n        }\n      }\n    },\n    stubFunction: function(obj, fn) {\n      var map, original, weakmap;\n      original = obj[fn];\n      map = this.weakReference(obj);\n      weakmap = this.weakmap;\n      return obj[fn] = function() {\n        var callback, k, r, response, _i, _len, _ref1, _ref2, _ref3, _ref4;\n        response = original.apply(obj, arguments);\n        _ref1 = map.pointers;\n        for (r in _ref1) {\n          k = _ref1[r];\n          _ref4 = (_ref2 = (_ref3 = weakmap[r]) != null ? _ref3.callbacks[k] : void 0) != null ? _ref2 : [];\n          for (_i = 0, _len = _ref4.length; _i < _len; _i++) {\n            callback = _ref4[_i];\n            callback();\n          }\n        }\n        return response;\n      };\n    },\n    observeMutations: function(obj, ref, keypath) {\n      var fn, functions, map, _base, _i, _len;\n      if (Array.isArray(obj)) {\n        map = this.weakReference(obj);\n        if (map.pointers == null) {\n          map.pointers = {};\n          functions = ['push', 'pop', 'shift', 'unshift', 'sort', 'reverse', 'splice'];\n          for (_i = 0, _len = functions.length; _i < _len; _i++) {\n            fn = functions[_i];\n            this.stubFunction(obj, fn);\n          }\n        }\n        if ((_base = map.pointers)[ref] == null) {\n          _base[ref] = [];\n        }\n        if (__indexOf.call(map.pointers[ref], keypath) < 0) {\n          return map.pointers[ref].push(keypath);\n        }\n      }\n    },\n    unobserveMutations: function(obj, ref, keypath) {\n      var idx, map, pointers;\n      if (Array.isArray(obj) && (obj[this.id] != null)) {\n        if (map = this.weakmap[obj[this.id]]) {\n          if (pointers = map.pointers[ref]) {\n            if ((idx = pointers.indexOf(keypath)) >= 0) {\n              pointers.splice(idx, 1);\n            }\n            if (!pointers.length) {\n              delete map.pointers[ref];\n            }\n            return this.cleanupWeakReference(map, obj[this.id]);\n          }\n        }\n      }\n    },\n    observe: function(obj, keypath, callback) {\n      var callbacks, desc, value;\n      callbacks = this.weakReference(obj).callbacks;\n      if (callbacks[keypath] == null) {\n        callbacks[keypath] = [];\n        desc = Object.getOwnPropertyDescriptor(obj, keypath);\n        if (!((desc != null ? desc.get : void 0) || (desc != null ? desc.set : void 0))) {\n          value = obj[keypath];\n          Object.defineProperty(obj, keypath, {\n            enumerable: true,\n            get: function() {\n              return value;\n            },\n            set: (function(_this) {\n              return function(newValue) {\n                var cb, map, _i, _len, _ref1;\n                if (newValue !== value) {\n                  _this.unobserveMutations(value, obj[_this.id], keypath);\n                  value = newValue;\n                  if (map = _this.weakmap[obj[_this.id]]) {\n                    callbacks = map.callbacks;\n                    if (callbacks[keypath]) {\n                      _ref1 = callbacks[keypath].slice();\n                      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n                        cb = _ref1[_i];\n                        if (__indexOf.call(callbacks[keypath], cb) >= 0) {\n                          cb();\n                        }\n                      }\n                    }\n                    return _this.observeMutations(newValue, obj[_this.id], keypath);\n                  }\n                }\n              };\n            })(this)\n          });\n        }\n      }\n      if (__indexOf.call(callbacks[keypath], callback) < 0) {\n        callbacks[keypath].push(callback);\n      }\n      return this.observeMutations(obj[keypath], obj[this.id], keypath);\n    },\n    unobserve: function(obj, keypath, callback) {\n      var callbacks, idx, map;\n      if (map = this.weakmap[obj[this.id]]) {\n        if (callbacks = map.callbacks[keypath]) {\n          if ((idx = callbacks.indexOf(callback)) >= 0) {\n            callbacks.splice(idx, 1);\n            if (!callbacks.length) {\n              delete map.callbacks[keypath];\n              this.unobserveMutations(obj[keypath], obj[this.id], keypath);\n            }\n          }\n          return this.cleanupWeakReference(map, obj[this.id]);\n        }\n      }\n    },\n    get: function(obj, keypath) {\n      return obj[keypath];\n    },\n    set: function(obj, keypath, value) {\n      return obj[keypath] = value;\n    }\n  };\n\n  Rivets.factory = function(sightglass) {\n    Rivets.sightglass = sightglass;\n    Rivets[\"public\"]._ = Rivets;\n    return Rivets[\"public\"];\n  };\n\n  if (typeof (typeof module !== \"undefined\" && module !== null ? module.exports : void 0) === 'object') {\n    module.exports = Rivets.factory(require('sightglass'));\n  } else if (typeof define === 'function' && define.amd) {\n    define(['sightglass'], function(sightglass) {\n      return this.rivets = Rivets.factory(sightglass);\n    });\n  } else {\n    this.rivets = Rivets.factory(sightglass);\n  }\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rivets/dist/rivets.js\n// module id = 2\n// module chunks = 0 1","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 3\n// module chunks = 0 1","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 4\n// module chunks = 0 1","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tvar styleTarget = fn.call(this, selector);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[selector] = styleTarget;\n\t\t}\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/lib/addStyles.js\n// module id = 5\n// module chunks = 0 1","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/lib/urls.js\n// module id = 6\n// module chunks = 0 1","export const interactionReferenceString = 'http://www.comprodls.com/m1.0/interaction/fib2';\r\n\r\nexport const constantInputClass = {\r\n  DOM_SEL_INPUT_BOX: 'userAnswer'\r\n};\r\n\r\nexport const feedbackPresets = [\r\n  {key: 'correct', value: 'Perfect. You got it correct !!!', showDropdown: true, order: 1},\r\n  {key: 'incorrect', value: 'Sorry, Wrong Responses. Try Again After some time !!!', showDropdown: true, order: 2},\r\n  {key: 'partiallyCorrect', value: 'You are almost done. Try Again !!!', showDropdown: true, order: 3},\r\n  {key: 'partiallyIncorrect', value: 'Sorry, Wrong responses', showDropdown: true, order: 4},\r\n  {key: 'empty', value: 'You did not enter anything.', showDropdown: true, order: 5}\r\n];\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/fib-editor/fib2editor-constants.js","/* global $ */\r\n\r\nimport Fib2Transformer from './fib2editor-transform';\r\nimport Fib2ModelAndView from './fib2editor-modelview';\r\nimport Fib2EditorUtils from './fib2editor-utils';\r\n\r\nconst load = Symbol('loadFIB2');\r\nconst transform = Symbol('transformFIB2Editor');\r\nconst renderView = Symbol('renderFIB2Editor');\r\nconst setUtils = Symbol('setUtils');\r\n\r\nclass fib2Editor {\r\n\r\n    constructor(elRoot, params, adaptor, htmlLayout, jsonContentObj, callback = () => {}) {\r\n\r\n        this.elRoot = elRoot;\r\n        this.params = params;\r\n\r\n        /**\r\n        * Store the adaptor.\r\n        */\r\n        this.adaptor = adaptor;\r\n\r\n        this.theme = htmlLayout;\r\n\r\n        /**\r\n         * @member {Object}\r\n         * Clone the JSON so that original is preserved.\r\n         */\r\n        this.jsonContent = $.extend(true, {}, jsonContentObj);\r\n\r\n        /**\r\n         * Validation block.\r\n         */\r\n        if (this.jsonContent.content === undefined) {\r\n            callback();\r\n            return;\r\n        }\r\n\r\n        this[load]();\r\n\r\n        /** Inform the shell that initialization is complete */\r\n        callback();\r\n\r\n    }\r\n\r\n    [load]() {\r\n        this[transform]();\r\n        this[setUtils]();\r\n        this[renderView]();\r\n    }\r\n\r\n    [transform]() {\r\n        this.fib2Transformer = new Fib2Transformer(this.jsonContent);\r\n        [this.fib2EditedJSONContent, this.interactionIds] = this.fib2Transformer.transform();\r\n    }\r\n\r\n    [setUtils]() {\r\n        this.utils = new Fib2EditorUtils(this.fib2EditedJSONContent, this.interactionIds, this.adaptor);\r\n    }\r\n\r\n    [renderView]() {\r\n        let fib2ModelAndView = new Fib2ModelAndView(this.fib2EditedJSONContent, this.adaptor, this.utils);\r\n        let htmltemplate = fib2ModelAndView.template;\r\n\r\n        /**\r\n         * @member {String}\r\n         * Apply the content JSON to the htmllayout.\r\n         */\r\n        $(this.elRoot).html(htmltemplate);\r\n        fib2ModelAndView.bindData();\r\n    }\r\n\r\n    getConfig() {\r\n        this.utils.getConfig();\r\n    }\r\n\r\n    getStatus() {\r\n        this.utils.getStatus();\r\n    }\r\n\r\n    saveItemInEditor() {\r\n        this.utils.saveItemInEditor();\r\n    }\r\n}\r\n\r\nexport {fib2Editor};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/fib-editor/fib2editor.js","/* global $ */\r\n\r\nimport {feedbackPresets, constantInputClass, interactionReferenceString} from './fib2editor-constants';\r\n\r\nconst buildModelandViewContent = Symbol('ModelandViewContent');\r\nconst parseAndUpdateJSONForRivets = Symbol('parseAndUpdateJSONForRivets');\r\nconst parseQuestionTextJSONForRivets = Symbol('parseQuestionTextJSONForRivets');\r\nconst parseInstructionTextJSONForRivets = Symbol('parseInstructionTextJSONForRivets');\r\nconst parseGlobalFeedbackJSONForRivets = Symbol('parseGlobalFeedbackJSONForRivets');\r\nconst icon = {\r\n  correct: 'fa-smile-o',\r\n  incorrect: 'fa-frown-o',\r\n  partiallyIncorrect: 'fa-frown-o',\r\n  partiallyCorrect: 'fa-smile-o',\r\n  empty: 'fa-meh-o',\r\n  generic: 'fa-comment-o'\r\n};\r\n\r\nclass Fib2Transformer {\r\n\r\n  constructor(jsonContent) {\r\n    this.editedJsonContent = jsonContent;\r\n    this.interactionIds = [];\r\n  }\r\n\r\n  transform() {\r\n    this[buildModelandViewContent]();\r\n    return [this.editedJsonContent, this.interactionIds];\r\n  }\r\n\r\n  [buildModelandViewContent]() {\r\n    //Process JSON for easy iteration in template\r\n    this[parseAndUpdateJSONForRivets]();\r\n  }\r\n\r\n  /*\r\n  This function creates content for the editor from the base JSON data recieved\r\n  */\r\n  [parseAndUpdateJSONForRivets]() {\r\n    this.editedJsonContent.FIBSR = false;\r\n    this.editedJsonContent.isInstructionEmpty = true;\r\n    this.editedJsonContent.enableFeedBack = false;\r\n\r\n    // Process JSON to initiate interactionIds and parse questionText\r\n    this[parseQuestionTextJSONForRivets]();\r\n    this[parseInstructionTextJSONForRivets]();\r\n    this[parseGlobalFeedbackJSONForRivets]();\r\n\r\n    for (let i = 0; i < this.interactionIds.length; i++) {\r\n        let interaction = this.editedJsonContent.content.interactions[this.interactionIds[i]];\r\n        let type = interaction.type;\r\n\r\n        this.editedJsonContent[type] = true;\r\n    }\r\n  }\r\n\r\n  [parseQuestionTextJSONForRivets]() {\r\n    this.editedJsonContent.content.questiondata = [];\r\n\r\n    this.editedJsonContent.content.canvas.data.questiondata.forEach((element, index) => {\r\n      if (element.text !== '') {\r\n        element.questionText = element.text;\r\n        element.answerText = element.text;\r\n\r\n        let parsedQuestionArray = $('<div>' + element['text'] + '</div>');\r\n        let interactionsReferences = $(parsedQuestionArray).find('a[href=\\'' + interactionReferenceString + '\\']');\r\n\r\n        interactionsReferences.each((id, el) => {\r\n          let interactionId = $(el).text().trim();\r\n\r\n          this.interactionIds.push(interactionId);\r\n\r\n          let interactionTag = el.outerHTML;\r\n\r\n          interactionTag = interactionTag.replace(/\"/g, '\\'');\r\n\r\n          const answer = this.editedJsonContent.responses[interactionId].correct;\r\n\r\n          const questionBlank = `\r\n            <span class=\"response-blank\" contenteditable=\"false\"><span class=\"drag\">${interactionId.substring(1)}</span><span id=\"${interactionId}\" class=\"answer\">Response</span></span>\r\n          `;\r\n\r\n          element.questionText = element.questionText.replace(interactionTag, questionBlank);\r\n\r\n          const answerBlank = '<span class=\"input\">' + '<input type=\"text\" value=\"' + answer + '\" class=\" ' + interactionId + ' input-sm ' + constantInputClass.DOM_SEL_INPUT_BOX + '\"/>' + '</span>';\r\n\r\n          element.answerText = element.answerText.replace(interactionTag, answerBlank);\r\n        });\r\n        this.editedJsonContent.content.questiondata.push(element);\r\n      }\r\n    });\r\n  }\r\n\r\n  [parseInstructionTextJSONForRivets]() {\r\n    this.editedJsonContent.content.instructions = this.editedJsonContent.content.instructions.map((element) => {\r\n        let text = 'Placeholder Instruction text. Update \"Me\" with a valid Instruction text for this question';\r\n\r\n        if (element.text !== '' || element.tag === 'html') {\r\n            text = element.text || element[element['tag']];\r\n        }\r\n        return {\r\n          text,\r\n          tag: element.tag\r\n        };\r\n    });\r\n\r\n    this.editedJsonContent.isInstructionEmpty = this.editedJsonContent.content.instructions.length <= 0;\r\n  }\r\n\r\n  [parseGlobalFeedbackJSONForRivets]() {\r\n    if (this.editedJsonContent.feedback.global === undefined) {\r\n      this.editedJsonContent.feedback.global = [];\r\n      return;\r\n    }\r\n    const tempObj = this.editedJsonContent.feedback.global;\r\n    let tempArr = [];\r\n\r\n    if (tempObj && Object.keys(tempObj).length > 0) {\r\n      Object.keys(tempObj).forEach(function (key, index) {\r\n        let processedObj = {};\r\n\r\n        processedObj.customAttribs = {};\r\n        processedObj.customAttribs.key = key;\r\n        processedObj.customAttribs.value = tempObj[key];\r\n        processedObj.customAttribs.index = index;\r\n        if (key === 'correct') {\r\n          processedObj.customAttribs.order = 1;\r\n          feedbackPresets[0].showDropdown = false;\r\n        } else if (key === 'incorrect') {\r\n          processedObj.customAttribs.order = 4;\r\n          feedbackPresets[1].showDropdown = false;\r\n        } else if (key === 'partiallyCorrect') {\r\n          processedObj.customAttribs.order = 2;\r\n          feedbackPresets[2].showDropdown = false;\r\n        } else if (key === 'partiallyIncorrect') {\r\n          processedObj.customAttribs.order = 3;\r\n          feedbackPresets[3].showDropdown = false;\r\n        } else if (key === 'empty') {\r\n          processedObj.customAttribs.order = 5;\r\n          feedbackPresets[4].showDropdown = false;\r\n        } else {\r\n          processedObj.customAttribs.order = 100;\r\n        }\r\n        processedObj.customAttribs.icon = icon[key];\r\n        tempArr.push(processedObj);\r\n      });\r\n      tempArr.sort(function (a, b) {\r\n        return a.customAttribs.order - b.customAttribs.order;\r\n      });\r\n      this.editedJsonContent.feedback.global = tempArr;\r\n      this.editedJsonContent.enableFeedBack = true;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Fib2Transformer;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/fib-editor/fib2editor-transform.js","/* global $ */\r\n\r\nimport rivets from 'rivets';\r\nimport {feedbackPresets} from './fib2editor-constants';\r\nrequire('../../scss/fib2-editor.scss');\r\n\r\nlet fib2TemplateRef = require('../../html/fib2Editor.html');\r\nconst initializeRivets = Symbol('initializeRivets');\r\nconst bindEvents = Symbol('bindEvents');\r\nconst constantTemplateRef = {\r\n  TEMPLATES: {\r\n    /* Regular fib2 Layout */\r\n    FIB2_EDITOR: fib2TemplateRef\r\n  }\r\n};\r\n\r\nclass Fib2ModelAndView {\r\n\r\n  constructor(jsonContent, activityAdaptor, utils) {\r\n    this.editedJsonContent = jsonContent;\r\n    this.utils = utils;\r\n    this.sendItemChangeNotification = false;\r\n    this.activityAdaptor = activityAdaptor;\r\n  }\r\n\r\n  get template() {\r\n    return constantTemplateRef.TEMPLATES.FIB2_EDITOR;\r\n  }\r\n\r\n  bindData() {\r\n    const data = this[initializeRivets]();\r\n\r\n    rivets.bind($('#fib-editor'), data);\r\n    this[bindEvents]();\r\n  }\r\n\r\n  [initializeRivets]() {\r\n    let _self = this;\r\n    /*\r\n     * Formatters for rivets\r\n     */\r\n\r\n    /* Appends custom arguments to function calls*/\r\n    rivets.formatters.args = function (fn) {\r\n      let args = Array.prototype.slice.call(arguments, 1);\r\n\r\n      return function () {\r\n        return fn.apply(this, Array.prototype.concat.call(arguments, args));\r\n      };\r\n    };\r\n\r\n    rivets.binders['content'] = {\r\n      bind: function (el) {\r\n        this.callback = (e) => {\r\n          this.publish();\r\n        };\r\n        $(el).on('focusout', '.userAnswer', _self.utils.userAnswerInputEventListener.bind(_self.utils));\r\n        el.addEventListener('blur', this.callback);\r\n      },\r\n      unbind: function (el) {\r\n        el.removeEventListener('blur', this.callback);\r\n      },\r\n      getValue: function (el) {\r\n        return el.innerHTML;\r\n      },\r\n      routine: function (el, value) {\r\n        el.innerHTML = value;\r\n      }\r\n    };\r\n\r\n    rivets.binders['content-editable'] = {\r\n      bind: function (el) {\r\n        if (el.className === 'question-data mb-sm') {\r\n          el.addEventListener('paste', _self.utils.questionDataEventListener.bind(_self.utils));\r\n          $(el)\r\n            .on('mouseenter', '.drag', function () {\r\n              $(this).next().css('color', 'dodgerblue');\r\n            })\r\n            .on('mouseleave', '.drag', function () {\r\n              $(this).next().css('color', '');\r\n            })\r\n            .on('mouseenter', '.answer', function () {\r\n              $(this).prev().css('background-color', 'dodgerblue');\r\n            })\r\n            .on('mouseleave', '.answer', function () {\r\n              $(this).prev().css('background-color', '');\r\n            });\r\n        }\r\n\r\n        el.setAttribute('contenteditable', true);\r\n        this.callback = (e) => {\r\n          this.publish();\r\n        };\r\n        el.addEventListener('blur', this.callback);\r\n      },\r\n      unbind: function (el) {\r\n        el.removeEventListener('blur', this.callback);\r\n      },\r\n      getValue: function (el) {\r\n        return el.innerHTML;\r\n      },\r\n      routine: (el, value) => {\r\n        if (this.sendItemChangeNotification) {\r\n          if (el.className === 'question-data mb-sm') {\r\n            this.utils.updateAnswerTextJSON();\r\n          }\r\n          this.utils.handleItemChangedInEditor();\r\n        }\r\n        el.innerHTML = value;\r\n      }\r\n    };\r\n\r\n    rivets.binders.addclass = function (el, value) {\r\n      if (el.addedClass) {\r\n        $(el).removeClass(el.addedClass);\r\n        delete el.addedClass;\r\n      }\r\n\r\n      if (value) {\r\n        $(el).addClass(value);\r\n        el.addedClass = value;\r\n      }\r\n    };\r\n\r\n    return {\r\n      editorContent: this.editedJsonContent,\r\n      feedback: this.editedJsonContent.feedback,\r\n      isInstructionEmpty: this.editedJsonContent.isInstructionEmpty,\r\n      removeInstruction: this.utils.removeInstruction.bind(this.utils),\r\n      addInstruction: this.utils.addInstruction.bind(this.utils),\r\n      addQuestion: this.utils.addQuestion.bind(this.utils),\r\n      removeQuestion: this.utils.removeQuestion.bind(this.utils),\r\n      feedbackPresets: feedbackPresets\r\n    };\r\n  }\r\n\r\n  [bindEvents]() {\r\n    $(document).ready(() => {\r\n      this.sendItemChangeNotification = true;\r\n    });\r\n  }\r\n}\r\n\r\nexport default Fib2ModelAndView;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/fib-editor/fib2editor-modelview.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./fib2-editor.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./fib2-editor.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./fib2-editor.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scss/fib2-editor.scss\n// module id = 21\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"#fib-editor {\\n  /* styling for inline input box */ }\\n  #fib-editor .global {\\n    font-size: 1.3em;\\n    font-family: Open Sans;\\n    color: #585858;\\n    padding: 10px; }\\n  #fib-editor .outline-none {\\n    outline: none; }\\n  #fib-editor .color-gray {\\n    color: #343434; }\\n  #fib-editor .color-white {\\n    color: #fff; }\\n  #fib-editor .color-lightslategray {\\n    color: #d5d5d5; }\\n  #fib-editor .color-lightgray {\\n    color: #585858; }\\n  #fib-editor .bg-white {\\n    background-color: #fff; }\\n  #fib-editor .bg-capecode {\\n    background-color: #3f3f3f;\\n    color: #fff; }\\n  #fib-editor .bg-zanah {\\n    color: #2e2e2e;\\n    background-color: #def2d3; }\\n  #fib-editor .global-border {\\n    border: 1px solid lightslategray; }\\n  #fib-editor .font-semibold {\\n    font-weight: 600; }\\n  #fib-editor .font-normal {\\n    font-weight: 400; }\\n  #fib-editor .noborder {\\n    border: none; }\\n  #fib-editor .adjusted-width {\\n    width: 96%; }\\n  #fib-editor .mt-sm {\\n    margin-top: 15px; }\\n  #fib-editor .mt-md {\\n    margin-top: 20px; }\\n  #fib-editor .ml-md {\\n    margin-left: 20px; }\\n  #fib-editor .ml-xl {\\n    margin-left: 40px; }\\n  #fib-editor .mt-xs {\\n    margin-top: 5px; }\\n  #fib-editor .ml-xxl {\\n    margin-left: 60px; }\\n  #fib-editor .mr-xs {\\n    margin-right: 5px; }\\n  #fib-editor .ml-sm {\\n    margin-left: 15px; }\\n  #fib-editor .mb-sm {\\n    margin-bottom: 15px; }\\n  #fib-editor .mb-md {\\n    margin-bottom: 20px; }\\n  #fib-editor .mb-add-offset {\\n    margin-bottom: 25px; }\\n  #fib-editor .mr-1em {\\n    margin-right: 1em; }\\n  #fib-editor .pl-0 {\\n    padding-left: 0; }\\n  #fib-editor .pl-md {\\n    padding-left: 25px; }\\n  #fib-editor .pl-sm {\\n    padding-left: 15px; }\\n  #fib-editor .pr-0 {\\n    padding-right: 0; }\\n  #fib-editor .pr-3pc {\\n    padding-right: 3%; }\\n  #fib-editor .pr-7pc {\\n    padding-right: 3%; }\\n  #fib-editor .plr-1pc {\\n    padding-left: 1%;\\n    padding-right: 1%; }\\n  #fib-editor .plr-md {\\n    padding-left: 20px;\\n    padding-right: 20px; }\\n  #fib-editor .ptb-sm {\\n    padding-top: 10px;\\n    padding-bottom: 10px; }\\n  #fib-editor .pb-1pc {\\n    padding-bottom: 1%; }\\n  #fib-editor .border-bottom-dashed {\\n    border-bottom: 1px dashed #d5d5d5;\\n    transition: border-color 0.5s ease-in-out; }\\n  #fib-editor .border-bottom-blue {\\n    border-bottom: 1px solid #6778e3;\\n    transition: border-color 0.5s ease-in-out; }\\n  #fib-editor .border-dashed {\\n    border: 1px dashed; }\\n  #fib-editor .border-top {\\n    border-top: 1px solid #d5d5d5; }\\n  #fib-editor .border-left {\\n    border-left: 1px solid #d5d5d5; }\\n  #fib-editor .border-right {\\n    border-right: 1px solid #d5d5d5; }\\n  #fib-editor .border-bottom {\\n    border-bottom: 1px solid #d5d5d5; }\\n  #fib-editor .border-bottom-shadow {\\n    border-bottom: 1px solid #f3f3f3;\\n    box-shadow: 0 12px 15px -20px #2e2e2e; }\\n  #fib-editor .font-medium {\\n    font-size: 14px; }\\n  #fib-editor .text-underline {\\n    text-decoration: underline; }\\n  #fib-editor .correct {\\n    color: green; }\\n  #fib-editor .incorrect {\\n    color: red; }\\n  #fib-editor [contentEditable=true]:focus {\\n    border: none;\\n    outline: none; }\\n  #fib-editor [contentEditable=true]:empty:not(:focus):before {\\n    content: attr(data-text); }\\n  #fib-editor .option-div {\\n    line-height: 1.8em;\\n    width: 94%; }\\n  #fib-editor .ribbon-adjustments {\\n    margin: 0 15px 0 15px !important; }\\n  #fib-editor .icon-horizontal-align {\\n    position: absolute;\\n    right: 14px; }\\n  #fib-editor .hide-option {\\n    position: absolute;\\n    left: -9999px; }\\n  #fib-editor .fa-frown-o {\\n    color: #a94442; }\\n  #fib-editor .fa-smile-o {\\n    color: #3c763d; }\\n  #fib-editor .fa-meh-o {\\n    color: #8a6d3b; }\\n  #fib-editor .round-icon {\\n    border-radius: 50%; }\\n  #fib-editor .vertical-center-align {\\n    display: flex;\\n    align-items: center; }\\n  #fib-editor .vertical-bottom-align {\\n    display: flex;\\n    align-items: flex-end; }\\n  #fib-editor .vertical-top-align {\\n    display: flex;\\n    align-items: flex-start; }\\n  #fib-editor .vertical-align-self {\\n    align-self: center; }\\n  #fib-editor .option-icon-pencil {\\n    position: relative;\\n    left: 15px; }\\n  #fib-editor .icon-box {\\n    width: 7%;\\n    position: absolute;\\n    right: -25px; }\\n  #fib-editor .icon-pencil {\\n    position: absolute; }\\n  #fib-editor .bottom {\\n    bottom: 0; }\\n  #fib-editor .no-margin-left {\\n    margin-left: 0; }\\n  @media (max-width: 1240px) {\\n    #fib-editor .icon-box {\\n      width: 7%;\\n      right: -10px; }\\n    #fib-editor .option-div {\\n      width: 92%; } }\\n  @media (max-width: 980px) {\\n    #fib-editor .icon-box {\\n      width: 8%;\\n      right: 0; }\\n    #fib-editor .option-div {\\n      width: 90%; } }\\n  @media (max-width: 720px) {\\n    #fib-editor .icon-box {\\n      width: 10%;\\n      right: -10px; }\\n    #fib-editor .option-div {\\n      width: 86%; } }\\n  #fib-editor .linkenabled {\\n    color: #585858; }\\n  #fib-editor .linkdisabled {\\n    color: #dfdddd;\\n    pointer-events: none;\\n    cursor: default; }\\n  #fib-editor .qq-gallery .qq-progress-bar {\\n    background: #d5d5d5; }\\n  #fib-editor .qq-gallery .qq-upload-button {\\n    color: #2e2e2e;\\n    background-color: #fff;\\n    min-width: 150px;\\n    display: inline-block;\\n    padding: 6px 12px;\\n    line-height: 1.42857143;\\n    text-align: center;\\n    white-space: nowrap;\\n    vertical-align: middle;\\n    touch-action: manipulation;\\n    cursor: pointer;\\n    user-select: none;\\n    background-image: none;\\n    border: 1px dashed #2e2e2e;\\n    border-radius: 4px;\\n    box-shadow: none;\\n    outline: none;\\n    font-weight: 600;\\n    font-size: 1.1em; }\\n  #fib-editor .fa-pencil:before {\\n    color: lightslategray; }\\n  #fib-editor .textEditable[contentEditable=true]:not(:focus) {\\n    border-bottom: 1px dashed #d5d5d5; }\\n  #fib-editor .option-div[contentEditable=true]:focus {\\n    border: none;\\n    border-bottom: 1px solid #162375;\\n    outline: none; }\\n  #fib-editor a:hover {\\n    text-decoration: none;\\n    cursor: pointer; }\\n  #fib-editor li.highlight i.choices {\\n    border-color: green; }\\n    #fib-editor li.highlight i.choices:after {\\n      opacity: 0.7; }\\n  #fib-editor .fa-thumbs-o-up:before {\\n    content: \\\"\\\\F087\\\"; }\\n  #fib-editor .smart-form input {\\n    border-width: 0 0 1px 0; }\\n  #fib-editor .inline-input ol > li input[type=\\\"text\\\"] {\\n    text-align: center;\\n    width: 150px;\\n    border: none; }\\n  #fib-editor .inline-input span {\\n    display: inline; }\\n  #fib-editor .inline-input input {\\n    display: inline;\\n    font-size: 14px; }\\n  #fib-editor .inline-input ol > li span.input {\\n    text-align: center;\\n    width: 150px;\\n    display: inline-block;\\n    font-size: 14px;\\n    border-bottom: 1px solid black; }\\n  #fib-editor .remove-icon {\\n    float: right; }\\n  #fib-editor .nav-tabs {\\n    border-bottom: 2px solid #DDD; }\\n  #fib-editor .nav-tabs > li.active > a, #fib-editor .nav-tabs > li.active > a:focus, #fib-editor .nav-tabs > li.active > a:hover {\\n    border-width: 0; }\\n  #fib-editor .nav-tabs > li > a {\\n    border: none;\\n    color: #666; }\\n  #fib-editor .nav-tabs > li.active > a, #fib-editor .nav-tabs > li > a:hover {\\n    border: none;\\n    color: #4285F4 !important;\\n    background: transparent; }\\n  #fib-editor .nav-tabs > li > a::after {\\n    content: \\\"\\\";\\n    background: #4285F4;\\n    height: 2px;\\n    position: absolute;\\n    width: 100%;\\n    left: 0;\\n    bottom: -1px;\\n    transition: all 250ms ease 0s;\\n    transform: scale(0); }\\n  #fib-editor .nav-tabs > li.active > a::after, #fib-editor .nav-tabs > li:hover > a::after {\\n    transform: scale(1); }\\n  #fib-editor .tab-nav > li > a::after {\\n    background: #21527d none repeat scroll 0 0;\\n    color: #fff; }\\n  #fib-editor .tab-pane {\\n    padding: 15px 0; }\\n  #fib-editor .tab-content {\\n    padding: 20px; }\\n  #fib-editor .dls-media .carousel .carousel-control.left > i,\\n  #fib-editor .dls-media .carousel .carousel-control.left > i {\\n    /*position: absolute;*/\\n    left: 12px;\\n    top: 50%;\\n    transform: translateY(-50%);\\n    width: 30px !important;\\n    height: 30px !important; }\\n  #fib-editor .dls-media .carousel .carousel-control.left > i {\\n    left: auto;\\n    right: 12px; }\\n  #fib-editor .nounderline {\\n    text-decoration: none;\\n    outline: none; }\\n  #fib-editor .preview-empty {\\n    min-height: 200px;\\n    margin: 0 auto;\\n    position: relative; }\\n  #fib-editor .flex-center {\\n    display: -webkit-box;\\n    display: -ms-flexbox;\\n    display: flex;\\n    -webkit-box-align: center;\\n    -ms-flex-align: center;\\n    align-items: center;\\n    -webkit-box-pack: center;\\n    -ms-flex-pack: center;\\n    justify-content: center;\\n    -webkit-box-orient: vertical;\\n    -webkit-box-direction: normal;\\n    -ms-flex-direction: column;\\n    flex-direction: column; }\\n  #fib-editor .response-blank {\\n    font-size: 14px; }\\n    #fib-editor .response-blank .drag {\\n      cursor: move;\\n      background-color: #808B96;\\n      color: white;\\n      padding: 0.3em; }\\n    #fib-editor .response-blank .drag:hover {\\n      background-color: dodgerblue; }\\n    #fib-editor .response-blank .answer {\\n      background-color: #f0f0f0;\\n      padding: 0.3em; }\\n    #fib-editor .response-blank .answer:hover {\\n      color: dodgerblue; }\\n  #fib-editor .answer-data {\\n    color: #666666;\\n    user-select: none; }\\n  #fib-editor .question-alert {\\n    padding: 10px;\\n    margin-bottom: 10px;\\n    border: none; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/scss/fib2-editor.scss\n// module id = 22\n// module chunks = 1","module.exports = \"<!-- Engine Editor Template -->\\r\\n<div class=\\\"fib-body main-container\\\" id=\\\"fib-editor\\\">\\r\\n  <main class=\\\"main global\\\">\\r\\n    <section id=\\\"instruction\\\" class=\\\"section instruction border-bottom-shadow\\\">\\r\\n      <div class=\\\"section-box mt-sm\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-sm-12\\\" id=\\\"instructionLabel\\\" rv-hide=\\\"isInstructionEmpty\\\">\\r\\n            <header>\\r\\n              <h4 class=\\\"headerlabel font-semibold color-gray\\\">Instruction Text</h4>\\r\\n            </header>\\r\\n          </div>\\r\\n          <div class=\\\"col-sm-12\\\">\\r\\n            <ul class=\\\"list-unstyled nested-list\\\">\\r\\n              <li class=\\\"text-box colborder mt-sm mb-add-offset\\\"\\r\\n                  rv-each-instruction=\\\"editorContent.content.instructions\\\" rv-instructionIndex=\\\"%instruction%\\\">\\r\\n                <div class=\\\"vertical-top-align\\\">\\r\\n                  <span class=\\\"pull-left icon-pencil\\\">\\r\\n                    <i class=\\\"fa fa-pencil\\\"></i>\\r\\n                  </span>\\r\\n                  <div rv-content-editable=\\\"instruction.text\\\" style=\\\"width: 100%;\\\"\\r\\n                       data-text='Placeholder Instruction text. Update \\\"Me\\\" with a valid Instruction text for this question.'\\r\\n                       class=\\\"pr-3pc pb-1pc pl-md border-bottom-dashed\\\" role=\\\"button\\\"></div>\\r\\n                  <span class=\\\"pull-right icon-horizontal-align\\\">\\r\\n                    <a class=\\\"color-lightgray fa fa-times outline-none\\\" data-toggle=\\\"tooltip\\\"\\r\\n                       title=\\\"Click to remove this option\\\"\\r\\n                       rv-on-click=\\\"removeInstruction | args instruction %instruction%\\\"></a>\\r\\n                  </span>\\r\\n                </div>\\r\\n              </li>\\r\\n            </ul>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"row mb-add-offset\\\">\\r\\n          <div class=\\\"col-sm-12 dropdown\\\">\\r\\n            <button class=\\\"btn btn-primary btn-sm dropdown-toggle\\\" type=\\\"button\\\" id=\\\"menu1\\\" data-toggle=\\\"dropdown\\\">Add\\r\\n            </button>\\r\\n            <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\" id=\\\"instructionmenu\\\" aria-labelledby=\\\"menu1\\\" style=\\\"left: 15px;\\\">\\r\\n              <li class=\\\"border-bottom-dashed\\\" role=\\\"presentation\\\">\\r\\n                <a class='dropdown-toggle disabled' role=\\\"menuitem\\\" href=\\\"#\\\" rv-on-click=\\\"addInstruction\\\">Instruction\\r\\n                  Text</a>\\r\\n              </li>\\r\\n            </ul>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </section>\\r\\n    <section id=\\\"question\\\" class=\\\"section question\\\">\\r\\n      <!-- Loop over all instructions text -->\\r\\n      <div class=\\\"section-box\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-sm-12\\\">\\r\\n            <header>\\r\\n              <h4 class=\\\"headerlabel font-semibold color-gray\\\">Questions</h4>\\r\\n            </header>\\r\\n          </div>\\r\\n          <!-- Loop over all question data text -->\\r\\n          <div class=\\\"col-sm-12 mt-sm smart-form inline-input\\\">\\r\\n            <ol class=\\\"list-unstyled nested-list\\\">\\r\\n              <li class=\\\"text-box vertical-top-align mt-md mb-add-offset\\\" rv-each-qdata=\\\"editorContent.content.questiondata\\\">\\r\\n                <span class=\\\"pull-left icon-pencil\\\">\\r\\n                  <i class=\\\"fa fa-pencil\\\" aria-hidden=\\\"true\\\"></i>\\r\\n                </span>\\r\\n                <div style=\\\"width: 100%;\\\" data-text=\\\"Please Enter Question Test here.\\\"\\r\\n                     class=\\\"question-container pl-md border-bottom-dashed\\\" role=\\\"button\\\">\\r\\n                  <div class=\\\"question-data mb-sm\\\" rv-content-editable=\\\"qdata.questionText\\\"></div>\\r\\n                  <div class=\\\"answer-data mb-sm\\\" rv-content=\\\"qdata.answerText\\\"></div>\\r\\n                  <div class=\\\"alert alert-danger question-alert\\\" role=\\\"alert\\\" rv-show=\\\"qdata.alert\\\" rv-text=\\\"qdata.alert\\\"></div>\\r\\n                </div>\\r\\n                <span class=\\\"pull-right icon-horizontal-align\\\">\\r\\n                  <a class=\\\"color-lightgray fa fa-times outline-none\\\" data-toggle=\\\"tooltip\\\"\\r\\n                     title=\\\"Remove Question\\\" rv-on-click=\\\"removeQuestion | args qdata %qdata%\\\"></a>\\r\\n                </span>\\r\\n              </li>\\r\\n            </ol>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"row mb-add-offset\\\">\\r\\n          <div class=\\\"col-sm-12 dropdown\\\">\\r\\n            <button class=\\\"btn btn-primary btn-sm dropdown-toggle\\\" type=\\\"button\\\" data-toggle=\\\"dropdown\\\"\\r\\n                    rv-on-click=\\\"addQuestion\\\">Add Question\\r\\n            </button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </section>\\r\\n    <section id=\\\"feedback\\\" class=\\\"section feedback  border-bottom-shadow\\\">\\r\\n      <div class=\\\"section-box\\\">\\r\\n        <div class=\\\"row mt-sm mb-sm\\\">\\r\\n          <div class=\\\"col-sm-12\\\" rv-hide=\\\"editorContent.enableFeedBack\\\">\\r\\n            <a class=\\\"enable-feedback\\\">\\r\\n              <button type=\\\"button\\\" class=\\\"btn btn-default active-btn border-dashed\\\" rv-on-click=\\\"showFeedBack\\\">\\r\\n                <h4 class=\\\"font-semibold color-gray\\\">Enable Feedback</h4>\\r\\n              </button>\\r\\n            </a>\\r\\n          </div>\\r\\n          <div class=\\\"col-sm-12 pl-0 pr-0\\\" rv-show=\\\"editorContent.enableFeedBack\\\">\\r\\n            <div class=\\\"col-sm-12 mb-md\\\">\\r\\n              <header>\\r\\n                <h4 class=\\\"headerlabel font-semibold color-gray\\\">Feedback</h4>\\r\\n              </header>\\r\\n            </div>\\r\\n            <ul class=\\\"list-unstyled nested-list\\\">\\r\\n              <li class=\\\"vertical-center-align col-xs-12 col-sm-12 bg-white  mb-add-offset pl-0 pr-0\\\"\\r\\n                  rv-each-element=\\\"editorContent.feedback.global\\\">\\r\\n                <div class=\\\"vertical-top-align\\\" style=\\\"width: 100%\\\">\\r\\n                  <span class=\\\"pull-left option-icon-pencil\\\"><i class=\\\"fa fa-pencil\\\"></i></span>\\r\\n                  <div rv-content-editable=\\\"element.customAttribs.value\\\" style=\\\"width: 100%;\\\"\\r\\n                       data-text='Placeholder Feedback text. Update \\\"Me\\\" with a valid Feedback text for this question.'\\r\\n                       class=\\\"pr-3pc pb-1pc pl-md border-bottom-dashed\\\" role=\\\"button\\\"></div>\\r\\n                </div>\\r\\n                <span class=\\\"pull-right\\\">\\r\\n                    <i class=\\\"fa fa-2x\\\" rv-addclass='element.customAttribs.icon'></i>\\r\\n                </span>\\r\\n              </li>\\r\\n            </ul>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </section>\\r\\n  </main>\\r\\n</div>\\r\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/html/fib2Editor.html\n// module id = 23\n// module chunks = 1","/* global $ */\r\n\r\nimport {constantInputClass, interactionReferenceString} from './fib2editor-constants';\r\n\r\nconst config = {\r\n  RESIZE_MODE: 'auto', /* Possible values - \"manual\"/\"auto\". Default value is \"auto\". */\r\n  RESIZE_HEIGHT: '580' /* Applicable, if RESIZE_MODE is manual. If RESIZE_HEIGHT is defined in TOC then that will override. */\r\n};\r\n\r\nclass Fib2EditorUtils {\r\n\r\n  constructor(jsonContent, interactionIds, activityAdaptor) {\r\n    this.editedJsonContent = jsonContent;\r\n    this.activityAdaptor = activityAdaptor;\r\n    this.uniqueId = this.activityAdaptor.getId();\r\n    this.interactionIds = interactionIds;\r\n    this.state = {\r\n      'hasUnsavedChanges': false\r\n    };\r\n  }\r\n\r\n  questionDataEventListener(e) {\r\n    // Get the clipboard data\r\n    const pattern = new RegExp('^[0-9]*Response$', 'i');\r\n    const paste = (e.clipboardData || window.clipboardData).getData('text');\r\n\r\n    if (paste.search(pattern) !== -1) {\r\n\r\n      // Prevent the default pasting event and stop bubbling\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      const selection = window.getSelection();\r\n\r\n      // Cancel the paste operation if the cursor or highlighted area isn't found\r\n      if (!selection.rangeCount) return false;\r\n\r\n      let interactionId = this.getInteractionId();\r\n      let questionBlank = document.createElement('span');\r\n\r\n      questionBlank.setAttribute('class', 'response-blank');\r\n      questionBlank.setAttribute('contenteditable', 'false');\r\n\r\n      let dragNode = document.createElement('span');\r\n      let newNode = document.createElement('span');\r\n\r\n      dragNode.setAttribute('class', 'drag');\r\n      dragNode.textContent = interactionId.substr(1);\r\n\r\n      newNode.setAttribute('id', interactionId);\r\n      newNode.setAttribute('class', 'answer');\r\n      newNode.textContent = 'Response';\r\n\r\n      questionBlank.appendChild(dragNode);\r\n      questionBlank.appendChild(newNode);\r\n      selection.getRangeAt(0).insertNode(questionBlank);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /* Function to get next interaction id and create the corresponding response node. */\r\n  getInteractionId() {\r\n    let id = 'i' + (this.interactionIds.length + 1);\r\n\r\n    this.interactionIds.push(id);\r\n    this.editedJsonContent.responses[id] = {correct: ''};\r\n    return id;\r\n  }\r\n\r\n  /* Event listener to input box - update the correct response corresponding to the input entered */\r\n  userAnswerInputEventListener(e) {\r\n    const answer = e.currentTarget.value;\r\n    const interactionId = e.currentTarget.classList[0];\r\n\r\n    this.editedJsonContent.responses[interactionId].correct = answer;\r\n  }\r\n\r\n  /* Transform the processedJSON to originally received form so that the platform\r\n  * can use it to repaint the updated json.\r\n  */\r\n  transformJSONtoOriginalForm() {\r\n\r\n    let JSONContent = $.extend(true, {}, this.editedJsonContent);\r\n    let finalJSONContent = {};\r\n\r\n    finalJSONContent.meta = JSONContent.meta;\r\n    finalJSONContent.content = JSONContent.content;\r\n    finalJSONContent.content.interactions = {};\r\n    finalJSONContent.content.canvas.data.questiondata = [];\r\n    finalJSONContent.responses = {};\r\n    finalJSONContent['learning-objectives'] = JSONContent['learning-objectives'];\r\n    finalJSONContent['tags'] = JSONContent['tags'];\r\n    finalJSONContent.feedback = {\r\n      global: {}\r\n    };\r\n\r\n    let splitCharacterPosStart;\r\n    let splitCharacterPosEnd;\r\n    const prefix = new RegExp('<span class=(\\'|\")input(\\'|\")><input');\r\n    const suffix = '</span>';\r\n\r\n    finalJSONContent.content.instructions = finalJSONContent.content.instructions.map((el) => {\r\n      if (el.tag === 'html') {\r\n        el[el.tag] = el.text;\r\n      }\r\n      return el;\r\n    });\r\n\r\n    let i = 1;\r\n\r\n    finalJSONContent.content.questiondata.forEach((el, index) => {\r\n      let question = (el.answerText).trim();\r\n\r\n      while (true) {\r\n        splitCharacterPosStart = question.search(prefix);\r\n        splitCharacterPosEnd = question.indexOf(suffix);\r\n        if (splitCharacterPosStart === -1) {\r\n          break;\r\n        } else {\r\n          let questionBlank = question.slice(splitCharacterPosStart, splitCharacterPosEnd + suffix.length);\r\n          let interactionId = 'i' + i++;\r\n          let interactionTag = `<a href='${interactionReferenceString}'>${interactionId}</a>`;\r\n\r\n          question = question.replace(questionBlank, interactionTag);\r\n          finalJSONContent.content.interactions[interactionId] = {type: 'FIBSR'};\r\n\r\n          finalJSONContent.responses[interactionId] = {\r\n            correct: this.editedJsonContent.responses[interactionId].correct,\r\n            ignorecase: this.editedJsonContent.responses[interactionId].ignorecase || false,\r\n            ignorewhitespace: this.editedJsonContent.responses[interactionId].ignorewhitespace || false\r\n          };\r\n\r\n        }\r\n\r\n      }\r\n      finalJSONContent.content.canvas.data.questiondata.push({text: question});\r\n    });\r\n\r\n    JSONContent.feedback.global.forEach((el) => {\r\n      const key = el.customAttribs.key;\r\n\r\n      finalJSONContent.feedback.global[key] = el.customAttribs.value;\r\n    });\r\n\r\n    delete finalJSONContent.content.questiondata;\r\n    return finalJSONContent;\r\n  }\r\n\r\n  /** Handles the add Instruction button click from the editor */\r\n  addInstruction() {\r\n    this.editedJsonContent.content.instructions.push({\r\n      'tag': 'text',\r\n      'text': 'Placeholder Instruction text. Update \"Me\" with a valid Instruction text for this question'\r\n    });\r\n    this.editedJsonContent.isInstructionEmpty = false;\r\n    $('#instructionLabel').show();\r\n    this.state.hasUnsavedChanges = true;\r\n    this.handleItemChangedInEditor();\r\n  }\r\n\r\n  /* Handles the remove Instruction item text from the editor */\r\n  removeInstruction(event, instruction, index) {\r\n    this.editedJsonContent.content.instructions.splice(index, 1);\r\n\r\n    if (this.editedJsonContent.content.instructions.length > 0) {\r\n      this.editedJsonContent.isInstructionEmpty = false;\r\n      $('#instructionLabel').show();\r\n    } else {\r\n      this.editedJsonContent.isInstructionEmpty = true;\r\n      $('#instructionLabel').hide();\r\n    }\r\n\r\n    this.state.hasUnsavedChanges = true;\r\n    this.handleItemChangedInEditor();\r\n  }\r\n\r\n  /** Handles the add question button click from the editor */\r\n  addQuestion() {\r\n    const interactionId = this.getInteractionId();\r\n\r\n    const questionBlank = `\r\n      <span class=\"response-blank\" contenteditable=\"false\"><span class=\"drag\">${interactionId.substring(1)}</span><span id=\"${interactionId}\" class=\"answer\">Response</span></span>\r\n    `;\r\n    const questionText = 'Placeholder question text. update \"Me\" with a valid' + questionBlank + 'text for this question';\r\n\r\n    const answerBlank = '<span class=\"input\">' + '<input type=\"text\" value=\"answer\" class=\"' + interactionId + ' input-sm ' + constantInputClass.DOM_SEL_INPUT_BOX + '\"/>' + '</span>';\r\n    const answerText = 'Placeholder question text. update \"Me\" with a valid' + answerBlank + 'text for this question';\r\n\r\n    this.editedJsonContent.content.questiondata.push({\r\n      questionText,\r\n      answerText\r\n    });\r\n\r\n    this.state.hasUnsavedChanges = true;\r\n    this.handleItemChangedInEditor();\r\n  }\r\n\r\n  /* Handles the remove question item text from the editor */\r\n  removeQuestion(event, question, index) {\r\n    if (this.editedJsonContent.content.questiondata.length === 1) {\r\n      this.editedJsonContent.content.questiondata[0].alert = 'Minimum one question required';\r\n      this.activityAdaptor.autoResizeActivityIframe();\r\n      return;\r\n    }\r\n    this.editedJsonContent.content.questiondata.splice(index, 1);\r\n    this.state.hasUnsavedChanges = true;\r\n    this.handleItemChangedInEditor();\r\n  }\r\n\r\n  updateAnswerTextJSON() {\r\n    this.editedJsonContent.content.questiondata.forEach((el, index) => {\r\n      let splitCharacterPosStart, splitCharacterPosEnd;\r\n      let numOfInteractions = 0;\r\n      const prefix = new RegExp('<span class=(\\'|\")response-blank(\\'|\") contenteditable=(\\'|\")false(\\'|\")>');\r\n      const suffix = '</span></span>';\r\n\r\n      el.answerText = el.questionText;\r\n      el.alert = '';\r\n\r\n      while (true) {\r\n        splitCharacterPosStart = el.answerText.search(prefix);\r\n        splitCharacterPosEnd = el.answerText.indexOf(suffix);\r\n        if (splitCharacterPosStart === -1) {\r\n          break;\r\n        } else {\r\n\r\n          numOfInteractions += 1;\r\n\r\n          let questionBlank = el.answerText.slice(splitCharacterPosStart, splitCharacterPosEnd + suffix.length);\r\n          let span = $.parseHTML(questionBlank);\r\n\r\n          let interactionId = 'i' + ($.parseHTML(span[0].innerHTML))[0].innerHTML;\r\n          let answer = (this.editedJsonContent.responses[interactionId]) ? this.editedJsonContent.responses[interactionId].correct : '';\r\n\r\n          if (answer === undefined) {\r\n            answer = '';\r\n          }\r\n          const answerBlank = '<span class=\"input\">' + '<input type=\"text\" value=\"' + answer + '\" class=\"' + interactionId + ' input-sm ' + constantInputClass.DOM_SEL_INPUT_BOX + '\"/>' + '</span>';\r\n\r\n          el.answerText = el.answerText.replace(questionBlank, answerBlank);\r\n        }\r\n      }\r\n\r\n      if (numOfInteractions === 0) {\r\n        el.alert = 'Minimum one blank required';\r\n      }\r\n    });\r\n\r\n    this.state.hasUnsavedChanges = true;\r\n  }\r\n\r\n  handleItemChangedInEditor() {\r\n    this.activityAdaptor.autoResizeActivityIframe();\r\n    this.activityAdaptor.itemChangedInEditor(this.transformJSONtoOriginalForm(), this.uniqueId);\r\n  }\r\n\r\n  validateEditedJsonContent() {\r\n    /*\r\n    *  Minimum one question required\r\n    */\r\n    if (this.editedJsonContent.content.questiondata.length !== 0) {\r\n      /*\r\n      *  Minimum one blank required in each question\r\n      */\r\n      return this.editedJsonContent.content.questiondata.every((el) => {\r\n        let splitCharacterPosStart, splitCharacterPosEnd;\r\n        let isAtLeastOneInteractionExist = false;\r\n        const prefix = new RegExp('<span class=(\\'|\")response-blank(\\'|\") contenteditable=(\\'|\")false(\\'|\")>');\r\n        const suffix = '</span></span>';\r\n\r\n        splitCharacterPosStart = el.questionText.search(prefix);\r\n        splitCharacterPosEnd = el.questionText.indexOf(suffix);\r\n        if (splitCharacterPosStart !== -1 && splitCharacterPosEnd !== -1 && splitCharacterPosEnd > splitCharacterPosStart) {\r\n          isAtLeastOneInteractionExist = true;\r\n        }\r\n\r\n        return isAtLeastOneInteractionExist;\r\n      });\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  saveItemInEditor() {\r\n    if (this.validateEditedJsonContent()) {\r\n      this.activityAdaptor.submitEditChanges(this.transformJSONtoOriginalForm(), this.uniqueId);\r\n    } else {\r\n      // Validation Failed\r\n    }\r\n  }\r\n\r\n  getConfig() {\r\n    return config;\r\n  }\r\n\r\n  getStatus() {\r\n    return this.state.hasUnsavedChanges;\r\n  }\r\n}\r\n\r\nexport default Fib2EditorUtils;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/fib-editor/fib2editor-utils.js"],"sourceRoot":""}