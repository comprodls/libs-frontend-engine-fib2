!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=10)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Constants=void 0;var i=n(13),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.Constants={TEMPLATES:{FIB2:r.default},THEMES:{FIB2:"fib2",FIB2_LIGHT:"fib2-light",FIB2_DARK:"fib2-dark"},LAYOUT_COLOR:{BG:{FIB2:"#FFFFFF",FIB2_LIGHT:"#f6f6f6",FIB2_DARK:"#222222"}},MAX_RETRIES:10,INTERACTION_REFERENCE_STR:"http://www.comprodls.com/m1.0/interaction/fib2",STATEMENT_STARTED:"started",STATEMENT_ANSWERED:"answered",STATEMENT_INTERACTED:"interacted",STATEMENT_SUBMITTED:"submitted",STATUS_NOERROR:"NO_ERROR"}},function(t,e,n){var i,r;(function(){function n(t,e,n,i){return new s(t,e,n,i)}function s(t,e,n,i){this.options=i||{},this.options.adapters=this.options.adapters||{},this.obj=t,this.keypath=e,this.callback=n,this.objectPath=[],this.update=this.update.bind(this),this.parse(),o(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}function o(t){return"object"==typeof t&&null!==t}function a(t){throw new Error("[sightglass] "+t)}n.adapters={},s.tokenize=function(t,e,n){var i,r,s=[],o={i:n,path:""};for(i=0;i<t.length;i++)r=t.charAt(i),~e.indexOf(r)?(s.push(o),o={i:r,path:""}):o.path+=r;return s.push(o),s},s.prototype.parse=function(){var t,e,i=this.interfaces();i.length||a("Must define at least one adapter interface."),~i.indexOf(this.keypath[0])?(t=this.keypath[0],e=this.keypath.substr(1)):(void 0===(t=this.options.root||n.root)&&a("Must define a default root adapter."),e=this.keypath),this.tokens=s.tokenize(e,i,t),this.key=this.tokens.pop()},s.prototype.realize=function(){var t,e=this.obj,n=!1;return this.tokens.forEach(function(i,r){o(e)?(void 0!==this.objectPath[r]?e!==(t=this.objectPath[r])&&(this.set(!1,i,t,this.update),this.set(!0,i,e,this.update),this.objectPath[r]=e):(this.set(!0,i,e,this.update),this.objectPath[r]=e),e=this.get(i,e)):(!1===n&&(n=r),(t=this.objectPath[r])&&this.set(!1,i,t,this.update))},this),!1!==n&&this.objectPath.splice(n),e},s.prototype.update=function(){var t,e;(t=this.realize())!==this.target&&(o(this.target)&&this.set(!1,this.key,this.target,this.callback),o(t)&&this.set(!0,this.key,t,this.callback),e=this.value(),this.target=t,(this.value()instanceof Function||this.value()!==e)&&this.callback())},s.prototype.value=function(){if(o(this.target))return this.get(this.key,this.target)},s.prototype.setValue=function(t){o(this.target)&&this.adapter(this.key).set(this.target,this.key.path,t)},s.prototype.get=function(t,e){return this.adapter(t).get(e,t.path)},s.prototype.set=function(t,e,n,i){var r=t?"observe":"unobserve";this.adapter(e)[r](n,e.path,i)},s.prototype.interfaces=function(){var t=Object.keys(this.options.adapters);return Object.keys(n.adapters).forEach(function(e){~t.indexOf(e)||t.push(e)}),t},s.prototype.adapter=function(t){return this.options.adapters[t.i]||n.adapters[t.i]},s.prototype.unobserve=function(){var t;this.tokens.forEach(function(e,n){(t=this.objectPath[n])&&this.set(!1,e,t,this.update)},this),o(this.target)&&this.set(!1,this.key,this.target,this.callback)},void 0!==t&&t.exports?t.exports=n:(i=[],void 0!==(r=function(){return this.sightglass=n}.apply(e,i))&&(t.exports=r))}).call(this)},function(t,e,n){(function(t){var i,r;(function(){var s,o,a,l,u,c=function(t,e){return function(){return t.apply(e,arguments)}},f=[].slice,h={}.hasOwnProperty,d=function(t,e){function n(){this.constructor=t}for(var i in e)h.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s={options:["prefix","templateDelimiters","rootInterface","preloadData","handler","executeFunctions"],extensions:["binders","formatters","components","adapters"],public:{binders:{},components:{},formatters:{},adapters:{},prefix:"rv",templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,executeFunctions:!1,iterationAlias:function(t){return"%"+t+"%"},handler:function(t,e,n){return this.call(t,e,n.view.models)},configure:function(t){var e,n,i,r;null==t&&(t={});for(i in t)if(r=t[i],"binders"===i||"components"===i||"formatters"===i||"adapters"===i)for(n in r)e=r[n],s[i][n]=e;else s.public[i]=r},bind:function(t,e,n){var i;return null==e&&(e={}),null==n&&(n={}),i=new s.View(t,e,n),i.bind(),i},init:function(t,e,n){var i,r,o;if(null==n&&(n={}),null==e&&(e=document.createElement("div")),t=s.public.components[t],(r=t.template.call(this,e))instanceof HTMLElement){for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(r)}else e.innerHTML=r;return i=t.initialize.call(this,e,n),o=new s.View(e,i),o.bind(),o}}},window.jQuery||window.$?(a=window.jQuery||window.$,u="on"in a.prototype?["on","off"]:["bind","unbind"],o=u[0],l=u[1],s.Util={bindEvent:function(t,e,n){return a(t)[o](e,n)},unbindEvent:function(t,e,n){return a(t)[l](e,n)},getInputValue:function(t){var e;return e=a(t),"checkbox"===e.attr("type")?e.is(":checked"):e.val()}}):s.Util={bindEvent:function(){return"addEventListener"in window?function(t,e,n){return t.addEventListener(e,n,!1)}:function(t,e,n){return t.attachEvent("on"+e,n)}}(),unbindEvent:function(){return"removeEventListener"in window?function(t,e,n){return t.removeEventListener(e,n,!1)}:function(t,e,n){return t.detachEvent("on"+e,n)}}(),getInputValue:function(t){var e,n,i,r;if("checkbox"===t.type)return t.checked;if("select-multiple"===t.type){for(r=[],n=0,i=t.length;n<i;n++)e=t[n],e.selected&&r.push(e.value);return r}return t.value}},s.TypeParser=function(){function t(){}return t.types={primitive:0,keypath:1},t.parse=function(t){return/^'.*'$|^".*"$/.test(t)?{type:this.types.primitive,value:t.slice(1,-1)}:"true"===t?{type:this.types.primitive,value:!0}:"false"===t?{type:this.types.primitive,value:!1}:"null"===t?{type:this.types.primitive,value:null}:"undefined"===t?{type:this.types.primitive,value:void 0}:""===t?{type:this.types.primitive,value:void 0}:!1===isNaN(Number(t))?{type:this.types.primitive,value:Number(t)}:{type:this.types.keypath,value:t}},t}(),s.TextTemplateParser=function(){function t(){}return t.types={text:0,binding:1},t.parse=function(t,e){var n,i,r,s,o,a,l;for(a=[],s=t.length,n=0,i=0;i<s;){if((n=t.indexOf(e[0],i))<0){a.push({type:this.types.text,value:t.slice(i)});break}if(n>0&&i<n&&a.push({type:this.types.text,value:t.slice(i,n)}),i=n+e[0].length,(n=t.indexOf(e[1],i))<0){o=t.slice(i-e[1].length),r=a[a.length-1],(null!=r?r.type:void 0)===this.types.text?r.value+=o:a.push({type:this.types.text,value:o});break}l=t.slice(i,n).trim(),a.push({type:this.types.binding,value:l}),i=n+e[1].length}return a},t}(),s.View=function(){function t(t,e,n){var i,r,o,a,l,u,f,h,d,p,b,v,m;for(this.els=t,this.models=e,null==n&&(n={}),this.update=c(this.update,this),this.publish=c(this.publish,this),this.sync=c(this.sync,this),this.unbind=c(this.unbind,this),this.bind=c(this.bind,this),this.select=c(this.select,this),this.traverse=c(this.traverse,this),this.build=c(this.build,this),this.buildBinding=c(this.buildBinding,this),this.bindingRegExp=c(this.bindingRegExp,this),this.options=c(this.options,this),this.els.jquery||this.els instanceof Array||(this.els=[this.els]),d=s.extensions,l=0,f=d.length;l<f;l++){if(r=d[l],this[r]={},n[r]){p=n[r];for(i in p)o=p[i],this[r][i]=o}b=s.public[r];for(i in b)o=b[i],null==(a=this[r])[i]&&(a[i]=o)}for(v=s.options,u=0,h=v.length;u<h;u++)r=v[u],this[r]=null!=(m=n[r])?m:s.public[r];this.build()}return t.prototype.options=function(){var t,e,n,i,r;for(e={},r=s.extensions.concat(s.options),n=0,i=r.length;n<i;n++)t=r[n],e[t]=this[t];return e},t.prototype.bindingRegExp=function(){return new RegExp("^"+this.prefix+"-")},t.prototype.buildBinding=function(t,e,n,i){var r,o,a,l,u,c,f;return u={},f=function(){var t,e,n,r;for(n=i.match(/((?:'[^']*')*(?:(?:[^\|']*(?:'[^']*')+[^\|']*)+|[^\|]+))|^$/g),r=[],t=0,e=n.length;t<e;t++)c=n[t],r.push(c.trim());return r}(),r=function(){var t,e,n,i;for(n=f.shift().split("<"),i=[],t=0,e=n.length;t<e;t++)o=n[t],i.push(o.trim());return i}(),l=r.shift(),u.formatters=f,(a=r.shift())&&(u.dependencies=a.split(/\s+/)),this.bindings.push(new s[t](this,e,n,l,u))},t.prototype.build=function(){var t,e,n,i,r;for(this.bindings=[],e=function(t){return function(n){var i,r,o,a,l,u,c,f,h,d,p,b,v;if(3===n.nodeType){if(l=s.TextTemplateParser,(o=t.templateDelimiters)&&(f=l.parse(n.data,o)).length&&(1!==f.length||f[0].type!==l.types.text)){for(h=0,p=f.length;h<p;h++)c=f[h],u=document.createTextNode(c.value),n.parentNode.insertBefore(u,n),1===c.type&&t.buildBinding("TextBinding",u,null,c.value);n.parentNode.removeChild(n)}}else 1===n.nodeType&&(i=t.traverse(n));if(!i)for(v=function(){var t,e,i,r;for(i=n.childNodes,r=[],t=0,e=i.length;t<e;t++)a=i[t],r.push(a);return r}(),d=0,b=v.length;d<b;d++)r=v[d],e(r)}}(this),r=this.els,n=0,i=r.length;n<i;n++)t=r[n],e(t);this.bindings.sort(function(t,e){var n,i;return((null!=(n=e.binder)?n.priority:void 0)||0)-((null!=(i=t.binder)?i.priority:void 0)||0)})},t.prototype.traverse=function(t){var e,n,i,r,o,a,l,u,c,f,h,d,p,b,v,m;for(r=this.bindingRegExp(),o="SCRIPT"===t.nodeName||"STYLE"===t.nodeName,b=t.attributes,f=0,d=b.length;f<d;f++)if(e=b[f],r.test(e.name)){if(u=e.name.replace(r,""),!(i=this.binders[u])){v=this.binders;for(a in v)c=v[a],"*"!==a&&-1!==a.indexOf("*")&&(l=new RegExp("^"+a.replace(/\*/g,".+")+"$"),l.test(u)&&(i=c))}i||(i=this.binders["*"]),i.block&&(o=!0,n=[e])}for(m=n||t.attributes,h=0,p=m.length;h<p;h++)e=m[h],r.test(e.name)&&(u=e.name.replace(r,""),this.buildBinding("Binding",t,u,e.value));return o||(u=t.nodeName.toLowerCase(),this.components[u]&&!t._bound&&(this.bindings.push(new s.ComponentBinding(this,t,u)),o=!0)),o},t.prototype.select=function(t){var e,n,i,r,s;for(r=this.bindings,s=[],n=0,i=r.length;n<i;n++)e=r[n],t(e)&&s.push(e);return s},t.prototype.bind=function(){var t,e,n,i;for(i=this.bindings,e=0,n=i.length;e<n;e++)t=i[e],t.bind()},t.prototype.unbind=function(){var t,e,n,i;for(i=this.bindings,e=0,n=i.length;e<n;e++)t=i[e],t.unbind()},t.prototype.sync=function(){var t,e,n,i;for(i=this.bindings,e=0,n=i.length;e<n;e++)t=i[e],"function"==typeof t.sync&&t.sync()},t.prototype.publish=function(){var t,e,n,i;for(i=this.select(function(t){var e;return null!=(e=t.binder)?e.publishes:void 0}),e=0,n=i.length;e<n;e++)t=i[e],t.publish()},t.prototype.update=function(t){var e,n,i,r,s,o;null==t&&(t={});for(n in t)i=t[n],this.models[n]=i;for(o=this.bindings,r=0,s=o.length;r<s;r++)e=o[r],"function"==typeof e.update&&e.update(t)},t}(),s.Binding=function(){function t(t,e,n,i,r){this.view=t,this.el=e,this.type=n,this.keypath=i,this.options=null!=r?r:{},this.getValue=c(this.getValue,this),this.update=c(this.update,this),this.unbind=c(this.unbind,this),this.bind=c(this.bind,this),this.publish=c(this.publish,this),this.sync=c(this.sync,this),this.set=c(this.set,this),this.eventHandler=c(this.eventHandler,this),this.formattedValue=c(this.formattedValue,this),this.parseFormatterArguments=c(this.parseFormatterArguments,this),this.parseTarget=c(this.parseTarget,this),this.observe=c(this.observe,this),this.setBinder=c(this.setBinder,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={},this.model=void 0,this.setBinder()}return t.prototype.setBinder=function(){var t,e,n,i;if(!(this.binder=this.view.binders[this.type])){i=this.view.binders;for(t in i)n=i[t],"*"!==t&&-1!==t.indexOf("*")&&(e=new RegExp("^"+t.replace(/\*/g,".+")+"$"),e.test(this.type)&&(this.binder=n,this.args=new RegExp("^"+t.replace(/\*/g,"(.+)")+"$").exec(this.type),this.args.shift()))}if(this.binder||(this.binder=this.view.binders["*"]),this.binder instanceof Function)return this.binder={routine:this.binder}},t.prototype.observe=function(t,e,n){return s.sightglass(t,e,n,{root:this.view.rootInterface,adapters:this.view.adapters})},t.prototype.parseTarget=function(){var t;return t=s.TypeParser.parse(this.keypath),t.type===s.TypeParser.types.primitive?this.value=t.value:(this.observer=this.observe(this.view.models,this.keypath,this.sync),this.model=this.observer.target)},t.prototype.parseFormatterArguments=function(t,e){var n,i,r,o,a,l,u;for(t=function(){var e,n,r;for(r=[],e=0,n=t.length;e<n;e++)i=t[e],r.push(s.TypeParser.parse(i));return r}(),o=[],n=l=0,u=t.length;l<u;n=++l)i=t[n],o.push(i.type===s.TypeParser.types.primitive?i.value:((a=this.formatterObservers)[e]||(a[e]={}),(r=this.formatterObservers[e][n])||(r=this.observe(this.view.models,i.value,this.sync),this.formatterObservers[e][n]=r),r.value()));return o},t.prototype.formattedValue=function(t){var e,n,i,r,s,o,a,l,u;for(l=this.formatters,n=o=0,a=l.length;o<a;n=++o)i=l[n],e=i.match(/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g),r=e.shift(),i=this.view.formatters[r],s=this.parseFormatterArguments(e,n),(null!=i?i.read:void 0)instanceof Function?t=(u=i.read).call.apply(u,[this.model,t].concat(f.call(s))):i instanceof Function&&(t=i.call.apply(i,[this.model,t].concat(f.call(s))));return t},t.prototype.eventHandler=function(t){var e,n;return n=(e=this).view.handler,function(i){return n.call(t,this,i,e)}},t.prototype.set=function(t){var e;return t=t instanceof Function&&!this.binder.function&&s.public.executeFunctions?this.formattedValue(t.call(this.model)):this.formattedValue(t),null!=(e=this.binder.routine)?e.call(this,this.el,t):void 0},t.prototype.sync=function(){var t,e;return this.set(function(){var n,i,r,s,o,a,l;if(this.observer){if(this.model!==this.observer.target){for(o=this.dependencies,n=0,r=o.length;n<r;n++)e=o[n],e.unobserve();if(this.dependencies=[],null!=(this.model=this.observer.target)&&(null!=(a=this.options.dependencies)?a.length:void 0))for(l=this.options.dependencies,i=0,s=l.length;i<s;i++)t=l[i],e=this.observe(this.model,t,this.sync),this.dependencies.push(e)}return this.observer.value()}return this.value}.call(this))},t.prototype.publish=function(){var t,e,n,i,r,s,o,a,l,u,c,h,d;if(this.observer){for(a=this.getValue(this.el),s=this.formatters.length-1,c=this.formatters.slice(0).reverse(),n=l=0,u=c.length;l<u;n=++l)i=c[n],e=s-n,t=i.split(/\s+/),r=t.shift(),o=this.parseFormatterArguments(t,e),(null!=(h=this.view.formatters[r])?h.publish:void 0)&&(a=(d=this.view.formatters[r]).publish.apply(d,[a].concat(f.call(o))));return this.observer.setValue(a)}},t.prototype.bind=function(){var t,e,n,i,r,s,o;if(this.parseTarget(),null!=(r=this.binder.bind)&&r.call(this,this.el),null!=this.model&&(null!=(s=this.options.dependencies)?s.length:void 0))for(o=this.options.dependencies,n=0,i=o.length;n<i;n++)t=o[n],e=this.observe(this.model,t,this.sync),this.dependencies.push(e);if(this.view.preloadData)return this.sync()},t.prototype.unbind=function(){var t,e,n,i,r,s,o,a,l,u;for(null!=(o=this.binder.unbind)&&o.call(this,this.el),null!=(a=this.observer)&&a.unobserve(),l=this.dependencies,r=0,s=l.length;r<s;r++)i=l[r],i.unobserve();this.dependencies=[],u=this.formatterObservers;for(n in u){e=u[n];for(t in e)i=e[t],i.unobserve()}return this.formatterObservers={}},t.prototype.update=function(t){var e,n;return null==t&&(t={}),this.model=null!=(e=this.observer)?e.target:void 0,null!=(n=this.binder.update)?n.call(this,t):void 0},t.prototype.getValue=function(t){return this.binder&&null!=this.binder.getValue?this.binder.getValue.call(this,t):s.Util.getInputValue(t)},t}(),s.ComponentBinding=function(t){function e(t,e,n){var i,r,o,a,l,u,f,h;for(this.view=t,this.el=e,this.type=n,this.unbind=c(this.unbind,this),this.bind=c(this.bind,this),this.locals=c(this.locals,this),this.component=this.view.components[this.type],this.static={},this.observers={},this.upstreamObservers={},r=t.bindingRegExp(),f=this.el.attributes||[],l=0,u=f.length;l<u;l++)i=f[l],r.test(i.name)||(o=this.camelCase(i.name),a=s.TypeParser.parse(i.value),p.call(null!=(h=this.component.static)?h:[],o)>=0?this.static[o]=i.value:a.type===s.TypeParser.types.primitive?this.static[o]=a.value:this.observers[o]=i.value)}return d(e,t),e.prototype.sync=function(){},e.prototype.update=function(){},e.prototype.publish=function(){},e.prototype.locals=function(){var t,e,n,i,r,s;n={},r=this.static;for(t in r)i=r[t],n[t]=i;s=this.observers;for(t in s)e=s[t],n[t]=e.value();return n},e.prototype.camelCase=function(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})},e.prototype.bind=function(){var t,e,n,i,r,o,a,l,u,c,f,h,d,p,b,v,m,y,g,w;if(!this.bound){p=this.observers;for(e in p)n=p[e],this.observers[e]=this.observe(this.view.models,n,function(t){return function(e){return function(){return t.componentView.models[e]=t.observers[e].value()}}}(this).call(this,e));this.bound=!0}if(null!=this.componentView)this.componentView.bind();else{for(this.el.innerHTML=this.component.template.call(this),a=this.component.initialize.call(this,this.el,this.locals()),this.el._bound=!0,o={},b=s.extensions,c=0,h=b.length;c<h;c++){if(r=b[c],o[r]={},this.component[r]){v=this.component[r];for(t in v)l=v[t],o[r][t]=l}m=this.view[r];for(t in m)l=m[t],null==(u=o[r])[t]&&(u[t]=l)}for(y=s.options,f=0,d=y.length;f<d;f++)r=y[f],o[r]=null!=(g=this.component[r])?g:this.view[r];this.componentView=new s.View(Array.prototype.slice.call(this.el.childNodes),a,o),this.componentView.bind(),w=this.observers;for(e in w)i=w[e],this.upstreamObservers[e]=this.observe(this.componentView.models,e,function(t){return function(e,n){return function(){return n.setValue(t.componentView.models[e])}}}(this).call(this,e,i))}},e.prototype.unbind=function(){var t,e,n,i,r;n=this.upstreamObservers;for(t in n)e=n[t],e.unobserve();i=this.observers;for(t in i)e=i[t],e.unobserve();return null!=(r=this.componentView)?r.unbind.call(this):void 0},e}(s.Binding),s.TextBinding=function(t){function e(t,e,n,i,r){this.view=t,this.el=e,this.type=n,this.keypath=i,this.options=null!=r?r:{},this.sync=c(this.sync,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={}}return d(e,t),e.prototype.binder={routine:function(t,e){return t.data=null!=e?e:""}},e.prototype.sync=function(){return e.__super__.sync.apply(this,arguments)},e}(s.Binding),s.public.binders.text=function(t,e){return null!=t.textContent?t.textContent=null!=e?e:"":t.innerText=null!=e?e:""},s.public.binders.html=function(t,e){return t.innerHTML=null!=e?e:""},s.public.binders.show=function(t,e){return t.style.display=e?"":"none"},s.public.binders.hide=function(t,e){return t.style.display=e?"none":""},s.public.binders.enabled=function(t,e){return t.disabled=!e},s.public.binders.disabled=function(t,e){return t.disabled=!!e},s.public.binders.checked={publishes:!0,priority:2e3,bind:function(t){return s.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return s.Util.unbindEvent(t,"change",this.publish)},routine:function(t,e){var n;return"radio"===t.type?t.checked=(null!=(n=t.value)?n.toString():void 0)===(null!=e?e.toString():void 0):t.checked=!!e}},s.public.binders.unchecked={publishes:!0,priority:2e3,bind:function(t){return s.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return s.Util.unbindEvent(t,"change",this.publish)},routine:function(t,e){var n;return"radio"===t.type?t.checked=(null!=(n=t.value)?n.toString():void 0)!==(null!=e?e.toString():void 0):t.checked=!e}},s.public.binders.value={publishes:!0,priority:3e3,bind:function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return this.event="SELECT"===t.tagName?"change":"input",s.Util.bindEvent(t,this.event,this.publish)},unbind:function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return s.Util.unbindEvent(t,this.event,this.publish)},routine:function(t,e){var n,i,r,s,o,l,u;if("INPUT"===t.tagName&&"radio"===t.type)return t.setAttribute("value",e);if(null!=window.jQuery){if(t=a(t),(null!=e?e.toString():void 0)!==(null!=(s=t.val())?s.toString():void 0))return t.val(null!=e?e:"")}else if("select-multiple"===t.type){if(null!=e){for(u=[],i=0,r=t.length;i<r;i++)n=t[i],u.push(n.selected=(o=n.value,p.call(e,o)>=0));return u}}else if((null!=e?e.toString():void 0)!==(null!=(l=t.value)?l.toString():void 0))return t.value=null!=e?e:""}},s.public.binders.if={block:!0,priority:4e3,bind:function(t){var e,n;if(null==this.marker)return e=[this.view.prefix,this.type].join("-").replace("--","-"),n=t.getAttribute(e),this.marker=document.createComment(" rivets: "+this.type+" "+n+" "),this.bound=!1,t.removeAttribute(e),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t)},unbind:function(){if(this.nested)return this.nested.unbind(),this.bound=!1},routine:function(t,e){var n,i,r,o;if(!!e==!this.bound){if(e){r={},o=this.view.models;for(n in o)i=o[n],r[n]=i;return(this.nested||(this.nested=new s.View(t,r,this.view.options()))).bind(),this.marker.parentNode.insertBefore(t,this.marker.nextSibling),this.bound=!0}return t.parentNode.removeChild(t),this.nested.unbind(),this.bound=!1}},update:function(t){var e;return null!=(e=this.nested)?e.update(t):void 0}},s.public.binders.unless={block:!0,priority:4e3,bind:function(t){return s.public.binders.if.bind.call(this,t)},unbind:function(){return s.public.binders.if.unbind.call(this)},routine:function(t,e){return s.public.binders.if.routine.call(this,t,!e)},update:function(t){return s.public.binders.if.update.call(this,t)}},s.public.binders["on-*"]={function:!0,priority:1e3,unbind:function(t){if(this.handler)return s.Util.unbindEvent(t,this.args[0],this.handler)},routine:function(t,e){return this.handler&&s.Util.unbindEvent(t,this.args[0],this.handler),s.Util.bindEvent(t,this.args[0],this.handler=this.eventHandler(e))}},s.public.binders["each-*"]={block:!0,priority:4e3,bind:function(t){var e,n,i,r,s;if(null==this.marker)e=[this.view.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],t.removeAttribute(e),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t);else for(s=this.iterated,i=0,r=s.length;i<r;i++)n=s[i],n.bind()},unbind:function(t){var e,n,i,r;if(null!=this.iterated)for(r=this.iterated,n=0,i=r.length;n<i;n++)e=r[n],e.unbind()},routine:function(t,e){var n,i,r,o,a,l,u,c,f,h,d,p,b,v,m,y,g,w,k;if(l=this.args[0],e=e||[],this.iterated.length>e.length)for(g=Array(this.iterated.length-e.length),d=0,v=g.length;d<v;d++)g[d],h=this.iterated.pop(),h.unbind(),this.marker.parentNode.removeChild(h.els[0]);for(r=p=0,m=e.length;p<m;r=++p)if(a=e[r],i={index:r},i[s.public.iterationAlias(l)]=r,i[l]=a,null==this.iterated[r]){w=this.view.models;for(o in w)a=w[o],null==i[o]&&(i[o]=a);c=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker,u=this.view.options(),u.preloadData=!0,f=t.cloneNode(!0),h=new s.View(f,i,u),h.bind(),this.iterated.push(h),this.marker.parentNode.insertBefore(f,c.nextSibling)}else this.iterated[r].models[l]!==a&&this.iterated[r].update(i);if("OPTION"===t.nodeName)for(k=this.view.bindings,b=0,y=k.length;b<y;b++)n=k[b],n.el===this.marker.parentNode&&"value"===n.type&&n.sync()},update:function(t){var e,n,i,r,s,o,a;e={};for(n in t)i=t[n],n!==this.args[0]&&(e[n]=i);for(a=this.iterated,s=0,o=a.length;s<o;s++)r=a[s],r.update(e)}},s.public.binders["class-*"]=function(t,e){var n;if(n=" "+t.className+" ",!e==(-1!==n.indexOf(" "+this.args[0]+" ")))return t.className=e?t.className+" "+this.args[0]:n.replace(" "+this.args[0]+" "," ").trim()},s.public.binders["*"]=function(t,e){return null!=e?t.setAttribute(this.type,e):t.removeAttribute(this.type)},s.public.formatters.call=function(){var t,e;return e=arguments[0],t=2<=arguments.length?f.call(arguments,1):[],e.call.apply(e,[this].concat(f.call(t)))},s.public.adapters["."]={id:"_rv",counter:0,weakmap:{},weakReference:function(t){var e,n,i;return t.hasOwnProperty(this.id)||(e=this.counter++,Object.defineProperty(t,this.id,{value:e})),(n=this.weakmap)[i=t[this.id]]||(n[i]={callbacks:{}})},cleanupWeakReference:function(t,e){if(!(Object.keys(t.callbacks).length||t.pointers&&Object.keys(t.pointers).length))return delete this.weakmap[e]},stubFunction:function(t,e){var n,i,r;return i=t[e],n=this.weakReference(t),r=this.weakmap,t[e]=function(){var e,s,o,a,l,u,c,f,h;o=i.apply(t,arguments),u=n.pointers;for(s in u)for(e=u[s],h=null!=(c=null!=(f=r[s])?f.callbacks[e]:void 0)?c:[],a=0,l=h.length;a<l;a++)(0,h[a])();return o}},observeMutations:function(t,e,n){var i,r,s,o,a,l;if(Array.isArray(t)){if(s=this.weakReference(t),null==s.pointers)for(s.pointers={},r=["push","pop","shift","unshift","sort","reverse","splice"],a=0,l=r.length;a<l;a++)i=r[a],this.stubFunction(t,i);if(null==(o=s.pointers)[e]&&(o[e]=[]),p.call(s.pointers[e],n)<0)return s.pointers[e].push(n)}},unobserveMutations:function(t,e,n){var i,r,s;if(Array.isArray(t)&&null!=t[this.id]&&(r=this.weakmap[t[this.id]])&&(s=r.pointers[e]))return(i=s.indexOf(n))>=0&&s.splice(i,1),s.length||delete r.pointers[e],this.cleanupWeakReference(r,t[this.id])},observe:function(t,e,n){var i,r,s;return i=this.weakReference(t).callbacks,null==i[e]&&(i[e]=[],r=Object.getOwnPropertyDescriptor(t,e),(null!=r?r.get:void 0)||(null!=r?r.set:void 0)||(s=t[e],Object.defineProperty(t,e,{enumerable:!0,get:function(){return s},set:function(n){return function(r){var o,a,l,u,c;if(r!==s&&(n.unobserveMutations(s,t[n.id],e),s=r,a=n.weakmap[t[n.id]])){if(i=a.callbacks,i[e])for(c=i[e].slice(),l=0,u=c.length;l<u;l++)o=c[l],p.call(i[e],o)>=0&&o();return n.observeMutations(r,t[n.id],e)}}}(this)}))),p.call(i[e],n)<0&&i[e].push(n),this.observeMutations(t[e],t[this.id],e)},unobserve:function(t,e,n){var i,r,s;if((s=this.weakmap[t[this.id]])&&(i=s.callbacks[e]))return(r=i.indexOf(n))>=0&&(i.splice(r,1),i.length||(delete s.callbacks[e],this.unobserveMutations(t[e],t[this.id],e))),this.cleanupWeakReference(s,t[this.id])},get:function(t,e){return t[e]},set:function(t,e,n){return t[e]=n}},s.factory=function(t){return s.sightglass=t,s.public._=s,s.public},"object"==typeof(void 0!==t&&null!==t?t.exports:void 0)?t.exports=s.factory(n(1)):(i=[n(1)],void 0!==(r=function(t){return this.rivets=s.factory(t)}.apply(e,i))&&(t.exports=r))}).call(this)}).call(e,n(3)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){function n(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var s=i(r);return[n].concat(r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"})).concat([s]).join("\n")}return[n].join("\n")}function i(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=n(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var s=this[r][0];"number"==typeof s&&(i[s]=!0)}for(r=0;r<t.length;r++){var o=t[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(t,e,n){function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=p[i.id];if(r){r.refs++;for(var s=0;s<r.parts.length;s++)r.parts[s](i.parts[s]);for(;s<i.parts.length;s++)r.parts.push(c(i.parts[s],e))}else{for(var o=[],s=0;s<i.parts.length;s++)o.push(c(i.parts[s],e));p[i.id]={id:i.id,refs:1,parts:o}}}}function r(t,e){for(var n=[],i={},r=0;r<t.length;r++){var s=t[r],o=e.base?s[0]+e.base:s[0],a=s[1],l=s[2],u=s[3],c={css:a,media:l,sourceMap:u};i[o]?i[o].parts.push(c):n.push(i[o]={id:o,parts:[c]})}return n}function s(t,e){var n=v(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=g[g.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),g.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=v(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,r)}}function o(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=g.indexOf(t);e>=0&&g.splice(e,1)}function a(t){var e=document.createElement("style");return t.attrs.type="text/css",u(e,t.attrs),s(t,e),e}function l(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",u(e,t.attrs),s(t,e),e}function u(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function c(t,e){var n,i,r,s;if(e.transform&&t.css){if(!(s=e.transform(t.css)))return function(){};t.css=s}if(e.singleton){var u=y++;n=m||(m=a(e)),i=f.bind(null,n,u,!1),r=f.bind(null,n,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(e),i=d.bind(null,n,e),r=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),i=h.bind(null,n),r=function(){o(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}function f(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=k(e,r);else{var s=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(s,o[e]):t.appendChild(s)}}function h(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function d(t,e,n){var i=n.css,r=n.sourceMap,s=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||s)&&(i=w(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([i],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}var p={},b=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),v=function(t){var e={};return function(n){if(void 0===e[n]){var i=t.call(this,n);if(i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[n]=i}return e[n]}}(function(t){return document.querySelector(t)}),m=null,y=0,g=[],w=n(6);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},e.attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=b()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=r(t,e);return i(n,e),function(t){for(var s=[],o=0;o<n.length;o++){var a=n[o],l=p[a.id];l.refs--,s.push(l)}if(t){i(r(t,e),e)}for(var o=0;o<s.length;o++){var l=s[o];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete p[l.id]}}}};var k=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(r))return t;var s;return s=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(s)+")"})}},,function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Fib2ResponseProcessor=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(9),o=function(t){return t&&t.__esModule?t:{default:t}}(s),a=n(0),l=Symbol("getAnswersJSON"),u=Symbol("getFibsrAnswersJSON"),c=Symbol("getUserAnswersStats"),f=Symbol("markInput"),h=Symbol("buildFeedbackResponse"),d={currentTries:0,activityPartiallySubmitted:!1,activitySubmitted:!1},p=function(){function t(e){i(this,t),this.fib2Obj=e}return r(t,[{key:"saveResults",value:function(){var t=this,e=this[l](!1),n=this.fib2Obj.adaptor.getId();$(".userAnswer").attr("disabled",!0),$("label.input").addClass("state-disabled"),e.forEach(function(e,i){e.statusProgress="attempted",t.fib2Obj.adaptor.submitResults(e,n,function(e,n){n===a.Constants.STATUS_NOERROR?(d.activitySubmitted=!0,t.fib2Obj.adaptor.closeActivity(),d.currentTries=0):d.currentTries<a.Constants.MAX_RETRIES&&(d.currentTries++,t.saveResults())})})}},{key:"savePartial",value:function(){var t=this,e=this[l](!1),n=this.fib2Obj.adaptor.getId();this.fib2Obj.adaptor.sendStatement(n,(0,o.default)(a.Constants.STATEMENT_INTERACTED)),e.forEach(function(e,i){t.fib2Obj.adaptor.savePartialResults(e,n,function(t,e){e===a.Constants.STATUS_NOERROR&&(d.activityPariallySubmitted=!0)})})}},{key:l,value:function(t){var e=[],n=void 0;return n=this[u](),e.push(n),e}},{key:u,value:function(){var t=this,e=this.fib2Obj.jsonContent.meta.score.max,n=e/this.fib2Obj.fib2Model.interactionIds.length,i=this[c](),r=[],s=void 0,o=void 0;return this.fib2Obj.fib2Model.interactionIds.forEach(function(e){var s=i.userAnswersResult[e]?n:0;r.push({interactionId:e,score:s,answer:t.fib2Obj.userAnswers[e]||"",maxScore:n})}),i.isAllInteractionsEmpty?(o="empty",s=this[h]("global.empty",o,this.fib2Obj.fib2Model.feedback.global.empty)):i.totalQuestions===i.countCorrectQuestionAttempt&&i.totalInteractions===i.countCorrectInteractionsAttempt?(o="correct",s=this[h]("global.correct",o,this.fib2Obj.fib2Model.feedback.global.correct)):i.countCorrectQuestionAttempt>=Math.floor(i.totalQuestions/2)?(o="partially_correct",s=this[h]("global.partiallyCorrect",o,this.fib2Obj.fib2Model.feedback.global.partiallyCorrect)):i.countIncorrectQuestionAttempt>=Math.floor(i.totalQuestions/2)?(o="partially_incorrect",s=this[h]("global.partiallyIncorrect",o,this.fib2Obj.fib2Model.feedback.global.partiallyIncorrect)):0===i.countCorrectQuestionAttempt&&(o="incorrect",s=this[h]("global.incorrect",o,this.fib2Obj.fib2Model.feedback.global.incorrect)),{response:{interactions:r,statusEvaluation:o,feedback:s}}}},{key:c,value:function(){var t=this,e=this.fib2Obj.fib2Model.questionData,n=this.fib2Obj.fib2Model.interactionIds.length,i=this.fib2Obj.fib2Model.questionData.length,r={},s=0,o=0,a=0,l=0,u=!0;return e.forEach(function(e,n){var i=!0;e.interactions.forEach(function(e){var n=t.fib2Obj.fib2Model.responses[e].correct,s=t.fib2Obj.userAnswers[e];r[e]={correct:!1},t.fib2Obj.fib2Model.responses[e].ignorecase&&(n=n.toLowerCase(),s=n.toLowerCase()),t.fib2Obj.fib2Model.responses[e].ignorewhitespace&&(n=n.replace(/ /g,"")(),s=n.replace(/ /g,"")()),s!==n?(i=!1,void 0!==s&&""!==s&&(u=!1),l+=1):(u=!1,r[e].correct=!0,a+=1)}),i?s+=1:o+=1}),{userAnswersResult:r,totalInteractions:n,countIncorrectInteractionsAttempt:l,countCorrectInteractionsAttempt:a,totalQuestions:i,countCorrectQuestionAttempt:s,countIncorrectQuestionAttempt:o,isAllInteractionsEmpty:u}}},{key:"markAnswers",value:function(){this[f](),this.fib2Obj.adaptor.autoResizeActivityIframe()}},{key:f,value:function(){var t=this;this.fib2Obj.fib2Model.questionData.forEach(function(e,n){var i=!0;e.interactions.forEach(function(e){var n=t.fib2Obj.userAnswers[e],r=t.fib2Obj.fib2Model.responses[e].correct;n!==r?(i=!1,$("#"+e).addClass("wrongAnswer").removeClass("correctAnswer").attr("disabled",!0).parent().after('<span class="grade" style="color:green;font-weight: bold"> ('+r+")</span>")):$("#"+e).addClass("correctAnswer").removeClass("wrongAnswer").attr("disabled",!0)}),i?($("#answer"+n).next("label").addClass("state-success"),$("#answer"+n).addClass("correct").removeClass("wrong").removeClass("invisible")):($("#answer"+n).next("label").addClass("state-error"),$("#answer"+n).addClass("wrong").removeClass("correct").removeClass("invisible"))})}},{key:h,value:function(t,e,n){var i={};return i.id=t,i.status=e,i.content=n,i}},{key:"feedbackProcessor",value:function(){var t=this.fib2Obj.fib2Model.type,e=this[c]();this.fib2Obj.fib2Model.feedbackState.correct=!1,this.fib2Obj.fib2Model.feedbackState.incorrect=!1,this.fib2Obj.fib2Model.feedbackState.partiallyCorrect=!1,this.fib2Obj.fib2Model.feedbackState.partiallyIncorrect=!1,this.fib2Obj.fib2Model.feedbackState.empty=!1,"FIBSR"===t&&(e.isAllInteractionsEmpty?this.fib2Obj.fib2Model.feedbackState.empty=!0:e.totalQuestions===e.countCorrectQuestionAttempt&&e.totalInteractions===e.countCorrectInteractionsAttempt?this.fib2Obj.fib2Model.feedbackState.correct=!0:e.countCorrectQuestionAttempt>=Math.floor(e.totalQuestions/2)?this.fib2Obj.fib2Model.feedbackState.partiallyCorrect=!0:e.countIncorrectQuestionAttempt>=Math.floor(e.totalQuestions/2)?this.fib2Obj.fib2Model.feedbackState.partiallyIncorrect=!0:0===e.countCorrectQuestionAttempt&&(this.fib2Obj.fib2Model.feedbackState.incorrect=!0)),this.fib2Obj.adaptor.autoResizeActivityIframe()}}],[{key:"getState",value:function(){return d}},{key:"resetView",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];$("label.question").removeClass("state-disabled"),$(".userAnswer").each(function(){t||$(this).val(""),$(this).removeClass("wrongAnswer correctAnswer").attr("disabled",!1)}),$('[id^="answer"]').removeClass("correct wrong").addClass("invisible").next("label").removeClass("state-success state-error"),$(".grade").remove()}}]),t}();e.Fib2ResponseProcessor=p},function(t,e,n){"use strict";function i(t){return{timestamp:new Date,verb:{id:t}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fib2=void 0;var i=n(11),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.fib2=r.default},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(12),o=n(14),a=n(17),l=n(8),u=n(9),c=function(t){return t&&t.__esModule?t:{default:t}}(u),f=n(0),h=Symbol("loadFib2"),d=Symbol("transformFib2"),p=Symbol("renderFib2"),b=Symbol("bindEvents"),v=void 0,m=function(){function t(e,n,r,s,o,a){i(this,t),r.sendStatement(r.getId(),(0,c.default)(f.Constants.STATEMENT_STARTED)),this.elRoot=e,this.params=n,this.adaptor=r,this.theme=s,this.jsonContent=o,this.userAnswers={},this[h](),a&&a({backgroundColor:f.Constants.LAYOUT_COLOR.BG[s],fontFamily:"open-sans-font"})}return r(t,[{key:h,value:function(){this[d](),this[p](),this[b]()}},{key:d,value:function(){var t=new s.FIB2Transformer(this.jsonContent,this.params,this.theme);this.fib2Model=t.transform()}},{key:p,value:function(){v=new o.Fib2ModelAndView(this.fib2Model),$(this.elRoot).html(v.template),v.bindData()}},{key:b,value:function(){new a.Fib2Events(this).bindEvents()}},{key:"handleSubmit",value:function(){new l.Fib2ResponseProcessor(this).saveResults(),this.adaptor.sendStatement(this.adaptor.getId(),(0,c.default)(f.Constants.STATEMENT_SUBMITTED))}},{key:"getConfig",value:function(){return{MAX_RETRIES:f.Constants.MAX_RETRIES}}},{key:"getStatus",value:function(){var t=l.Fib2ResponseProcessor.getState();return t.activityPartiallySubmitted||t.activitySubmitted}},{key:"resetAnswers",value:function(){this.userAnswers={},l.Fib2ResponseProcessor.resetView()}},{key:"showGrades",value:function(){var t=new l.Fib2ResponseProcessor(this);$("label.question").addClass("state-disabled"),t.markAnswers()}},{key:"showFeedback",value:function(){new l.Fib2ResponseProcessor(this).feedbackProcessor()}},{key:"clearGrades",value:function(){l.Fib2ResponseProcessor.resetView(!0),v.clearGrades()}}]),t}();e.default=m,t.exports=e.default},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.FIB2Transformer=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),o=Symbol("ModelandViewContent"),a=Symbol("engine-theme"),l=Symbol("setType"),u=Symbol("setInteractions"),c=Symbol("setStimuli"),f=Symbol("setInstructions"),h=Symbol("setFeedback"),d=Symbol("setScoring"),p=Symbol("setResponses"),b=s.Constants.INTERACTION_REFERENCE_STR,v=function(){function t(e,n,r){i(this,t),this.entity=e,this.themeObj=r,this.fib2Model={instructions:[],questionData:[],stimuli:[],scoring:{},feedback:{},feedbackState:{correct:!1,partiallyCorrect:!1,incorrect:!1,partiallyIncorrect:!1,empty:!1},responses:{},type:"",theme:"",interactionIds:[]}}return r(t,[{key:"transform",value:function(){return this[o](),this.fib2Model}},{key:o,value:function(){this[a](this.themeObj),this[u](),this[l](),this[c](),this[f](),this[h](),this[d](),this[p]()}},{key:a,value:function(t){this.fib2Model.theme=s.Constants.THEMES[t]}},{key:l,value:function(){this.fib2Model.type=this.entity.meta.type}},{key:f,value:function(){this.fib2Model.instructions=this.entity.content.instructions.map(function(t){return{text:t[t.tag]}})}},{key:u,value:function(){var t=this,e=this.entity;this.fib2Model.questionData=e.content.canvas.data.questiondata.map(function(n,i){var r={},s=$("<div>"+n.text+"</div>"),o=$(s).find("a[href='"+b+"']");return r.interactions=[],r.types=[],r.numberOfInteractions=0,o.each(function(n,i){var s=$(i).text().trim(),o=$("<span  class='input answer'><input type='text' id='"+s+'\' class=\'userAnswer\' autocomplete="off" spellcheck="false"/></span>')[0];$(i).replaceWith(o),r.interactions.push(s),r.numberOfInteractions+=1,r.types.push(e.content.interactions[s]),t.fib2Model.interactionIds.push(s)}),r.questionText=s[0].innerHTML,r})}},{key:p,value:function(){this.fib2Model.responses=this.entity.responses}},{key:c,value:function(){this.fib2Model.stimuli=this.entity.content.stimulus.map(function(t){var e=t.tag,n=void 0;return e&&(n={src:t[e]},n[e]=!0),n||(n=t),n})}},{key:h,value:function(){this.fib2Model.feedback=this.entity.feedback}},{key:d,value:function(){this.fib2Model.scoring=this.entity.meta.score}}]),t}();e.FIB2Transformer=v},function(t,e){t.exports='\x3c!-- Engine Renderer Template --\x3e\r\n<div class="fib2-body" id="fib2-engine">\r\n  <main rv-addclass=\'content.theme\'>\r\n    <section class="instructions">\r\n      <p class="instruction" rv-each-instruction="content.instructions" rv-text-parse="instruction.text"></p>\r\n    </section>\r\n\r\n    <section class="smart-form inline-input">\r\n      <ol>\r\n        <li rv-each-question="content.questionData" class="question-li">\r\n          <span class="invisible pull-left" rv-answer-id="index"></span>\r\n          <label class="question">\r\n            <span rv-text-parse="question.questionText"></span>\r\n          </label>\r\n        </li>\r\n      </ol>\r\n    </section>\r\n\r\n    <section class="feedback">\r\n      <div class="row">\r\n        <div class="col-sm-12 col-md-12">\r\n          <div class="alert alert-success align-2-item" role="alert" rv-show="content.feedbackState.correct">\r\n            <span>\r\n              <i class="fa fa-2x fa-smile-o vertical-align"></i>\r\n            </span>\r\n            <span class="vertical-align pl-sm" rv-text="content.feedback.global.correct"></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-sm-12 col-md-12">\r\n          <div class="alert alert-danger align-2-item" role="alert" rv-show="content.feedbackState.incorrect">\r\n            <span>\r\n              <i class="fa fa-2x  fa-smile-o vertical-align"></i>\r\n            </span>\r\n            <span class="vertical-align pl-sm" rv-text="content.feedback.global.incorrect"></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-sm-12 col-md-12">\r\n          <div class="alert alert-danger align-2-item" role="alert" rv-show="content.feedbackState.partiallyCorrect">\r\n            <span>\r\n              <i class="fa fa-2x fa-meh-o vertical-align"></i>\r\n            </span>\r\n            <span class="vertical-align pl-sm" rv-text="content.feedback.global.partiallyCorrect"></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-sm-12 col-md-12">\r\n          <div class="alert alert-danger align-2-item" role="alert" rv-show="content.feedbackState.partiallyIncorrect">\r\n            <span>\r\n              <i class="fa fa-2x fa-frown-o vertical-align"></i>\r\n            </span>\r\n            <span class="vertical-align pl-sm" rv-text="content.feedback.global.partiallyIncorrect"></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-sm-12 col-md-12">\r\n          <div class="alert alert-warning align-2-item" role="alert" rv-show="content.feedbackState.empty">\r\n            <span>\r\n              <i class="fa fa-2x fa-meh-o vertical-align"></i>\r\n            </span>\r\n            <span class="vertical-align pl-sm" rv-text="content.feedback.global.empty"></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </main>\r\n</div>\r\n'},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Fib2ModelAndView=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),o=n(2),a=function(t){return t&&t.__esModule?t:{default:t}}(o);n(15);var l=Symbol("initializeRivets"),u=function(){function t(e){i(this,t),this.model=e}return r(t,[{key:"clearGrades",value:function(){this.model.feedbackState={correct:!1,partiallyCorrect:!1,incorrect:!1,partiallyIncorrect:!1,empty:!1}}},{key:"bindData",value:function(){var t=this[l]();a.default.bind($("#fib2-engine"),t)}},{key:l,value:function(){return a.default.binders.addclass=function(t,e){t.addedClass&&($(t).removeClass(t.addedClass),delete t.addedClass),e&&($(t).addClass(e),t.addedClass=e)},a.default.binders["text-parse"]=function(t,e){$(t).html(e)},a.default.binders["answer-id"]=function(t,e){t.id="answer"+e},{content:this.model}}},{key:"template",get:function(){return s.Constants.TEMPLATES.FIB2}},{key:"themes",get:function(){return s.Constants.THEMES}}]),t}();e.Fib2ModelAndView=u},function(t,e,n){var i=n(16);"string"==typeof i&&(i=[[t.i,i,""]]);var r={hmr:!0};r.transform=void 0;n(5)(i,r);i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(4)(!1),e.push([t.i,'/*******************************************************\r\n *\r\n * ----------------------\r\n * Engine Renderer Styles\r\n * ----------------------\r\n *\r\n * These styles do not include any product-specific branding\r\n * and/or layout / design. They represent minimal structural\r\n * SCSS which is necessary for a default rendering of an\r\n * FIB2 activity\r\n *\r\n * The styles are linked/depending on the presence of\r\n * certain elements (classes / ids / tags) in the DOM (as would\r\n * be injected via a valid FIB2 layout HTML and/or dynamically\r\n * created by the FIB2 engine JS)\r\n *\r\n *\r\n *******************************************************/\nmain {\n  font-size: 14px;\n  font-family: \'Open Sans\', Verdana, sans-serif; }\n\n.instructions {\n  font-size: 1.1em;\n  color: #5c5c5c;\n  margin-bottom: 0.9em; }\n\n.smart-form {\n  line-height: 0.8em; }\n  .smart-form ol {\n    padding: 0; }\n  .smart-form .question-li {\n    padding: .7em .4em .7em 1.8em;\n    margin-left: 2em;\n    color: #666; }\n    .smart-form .question-li .wrong:before {\n      content: "\\F00D";\n      color: red;\n      font-family: fontawesome;\n      display: block;\n      margin: .15em .36em auto -4.5em; }\n    .smart-form .question-li .correct:before {\n      content: "\\F00C";\n      color: green;\n      display: block;\n      font-family: fontawesome;\n      margin: .15em .36em auto -4.5em; }\n  .smart-form .question {\n    font-weight: normal;\n    margin: 0;\n    line-height: 1.5em; }\n    .smart-form .question input {\n      border-width: 0 0 1px 0;\n      outline: none;\n      width: 150px;\n      text-align: center;\n      border-radius: 0; }\n    .smart-form .question input:disabled {\n      opacity: 0.6;\n      background: #ffffff; }\n  .smart-form .state-success input {\n    border-color: #7DC27D; }\n  .smart-form .state-success input:disabled {\n    background: #f0fff0; }\n  .smart-form .state-error input {\n    border-color: #A90329; }\n  .smart-form .state-error input:disabled {\n    background: #fff0f0; }\n\n.feedback .alert-success {\n  background-color: #f2fdee; }\n\n.feedback .alert-danger {\n  background-color: #fdeeee; }\n\n.feedback .vertical-align {\n  vertical-align: middle; }\n\n.feedback .pl-sm {\n  padding-left: 0.5em; }\n\n.fib2-dark .instruction,\n.fib2-dark .question-li {\n  color: #ffffff; }\n\n.fib2-dark .smart-form .state-success input {\n  background: #363636;\n  border-color: #7DC27D; }\n\n.fib2-dark .smart-form .state-error input {\n  background: #363636;\n  border-color: #A90329; }\n\n.fib2-dark .smart-form input {\n  background: #363636;\n  color: #ffffff; }\n\n.fib2-dark .smart-form input:disabled {\n  opacity: 0.6 !important;\n  background: #363636; }\n\n.fib2-dark .feedback .alert-success {\n  background-color: #363636;\n  color: #40fd21;\n  border: 1px solid #494949; }\n\n.fib2-dark .feedback .alert-danger {\n  background-color: #363636;\n  color: #e30e0e;\n  border: 1px solid #494949; }\n\n.fib2-light {\n  background-color: #f6f6f6; }\n  .fib2-light .instructions {\n    color: #535353; }\n',""])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Fib2Events=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),o=n(8),a=function(){function t(e){i(this,t),this.fib2Obj=e,this.fib2UserResponse=new o.Fib2ResponseProcessor(e)}return r(t,[{key:"handleQuestionTextOnFocus",value:function(t){var e=this;s.Constants.PARTIAL_SAVE_TIMER&&clearInterval(s.Constants.PARTIAL_SAVE_TIMER),s.Constants.PARTIAL_SAVE_TIMER=setInterval(function(){var n=t.target,i=n.value.replace(/^\s+|\s+$/g,""),r=n.attributes.id.value;i!==e.fib2Obj.userAnswers[r]&&(e.fib2Obj.userAnswers[r]=i,e.fib2UserResponse.savePartial())},1e4)}},{key:"handleQuestionTextLostFocus",value:function(t){s.Constants.PARTIAL_SAVE_TIMER&&clearInterval(s.Constants.PARTIAL_SAVE_TIMER);var e=t.currentTarget,n=e.value.replace(/^\s+|\s+$/g,""),i=e.attributes.id.value;n!==this.fib2Obj.userAnswers[i]&&(this.fib2Obj.userAnswers[i]=n,this.fib2UserResponse.savePartial())}},{key:"bindEvents",value:function(){var t=this;$(".userAnswer").focus(function(e){t.handleQuestionTextOnFocus(e,t.fib2Obj)}).blur(function(e){t.handleQuestionTextLostFocus(e,t.fib2Obj)})}}]),t}();e.Fib2Events=a}])});